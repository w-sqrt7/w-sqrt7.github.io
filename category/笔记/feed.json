{
    "version": "https://jsonfeed.org/version/1",
    "title": "sqrt7 • All posts by \"笔记\" category",
    "description": "",
    "home_page_url": "https://w-sqrt7.gitee.io",
    "items": [
        {
            "id": "https://w-sqrt7.gitee.io/2024/03/11/dishui-note/%E6%BB%B4%E6%B0%B4%E9%80%86%E5%90%91%E2%80%94%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/",
            "url": "https://w-sqrt7.gitee.io/2024/03/11/dishui-note/%E6%BB%B4%E6%B0%B4%E9%80%86%E5%90%91%E2%80%94%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/",
            "title": "滴水逆向—汇编笔记",
            "date_published": "2024-03-11T09:10:42.483Z",
            "content_html": "<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"抱歉, 这个密码看着不太对, 请再试试.\" data-whm=\"抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"538a54893061810020ca060337b87bb19a5e68398a9450e2527eae1494330c4b\">e05d9ee6e48268b2b742c6d6f1681d6164fa5aa1dc52a0c978370e90ed17c302a63a466df9fb22fcb8ce418c71d391efa7f5647402d5cd01c4647b3f711a624344964487710c300a18bceef5aa03a6edafdfe6c1632c92396d9389efa42cef3fd2a44dc472f5bf763690465099021fe271df3d46c8698806c052efc64e21ce308eafeade252e6ec4dea9bdcd9fd2e48b77db8aff68681555f3a7f681402d06fb6080ea645eb935930779537a4fcac58961fbff34016b0a4ad84dc9c9cfd5a459ea6776dca1ccffe1a9aee9479c24e82268719a89375d0c5395cb18dcfb99237808ab73c73d79503f21454e82b02393b868ce92acfbf61016c1b97a445aa1183dcd943b4f66f615c0eebd186263aed24cf92c0759ed0763d14e5602d0fef1015a5c6f48bfd53463275fac8a65a873e8cfc26e8315acd620e0dfae6022a168a96565f6370ceebf529b57242947a8d6264abc1794c51c8b9045ef3cb2a412b51161de26818332948008db461244fc2710f652f0ca846e5aaa8f7574e991160fdad308bcce1b6bc510bac7f2077f5ea561b5adefe678b9b2aef03fdd0ad005db8c9039238699d50767693995a3a0d08cf291a2d72fe557fa594b220261c578d61e309205d6acd2308d7061701931754bb3c042a2dfd0f8511413cfb5a7ccb158d4843769e8860225a4b8362e784d75566940057eb9c1550a6c742af46baeccc7eb8540c355c4923e9e8835a1c18420ffaeef9fee296d277d964a451b04d25d946ce0fd32318d4dc9f2b4a0650916e0a9c8a069c4a427eda88fe2b80db9d617866fac2b1001e56dcaead21e18af4c066f722adff00a59ed833724f9e8b68b68ab40297ca3c25fb04845a0aaf27f7021a80c95dc08a83f1904828115354527e6cf9ae7d4fa220dfd6fec091b8bcf5c129fa499bc60e92b5e35ab00399a1667dd863d6a2bee5516b4fee53224786d3d219c9c49e9b65fae842032387c2b6355d13ae2523922a922fa6134b7ca17e5d71e03812e29818880576274374d519dc1bf21426968ced5cc1dd1deaa3043e915f9a0b7c3e0298a3a91e05e94eee1bb3acc24e019d0a1fce74219825c8c72c0cbdaaf359a1ac93db909a2f1cebb1b2640f4f56ce448311649c84067e8f6da58fc97b458dcb6563fabca50a503157bb32399a03919e6d8b5af7046b98eeed6419ca49989422c5fb76bbe561c07945d41edd32f06ac571733a0c2a159ac734814bb0692ec72f7d17dcbbddba8d5fa3d5309a84e989ea457d39085ccd35eb242f5f45c0ac106befc6442d5772b747730a5f552c7a94140cd8e0081a30293e9f5160dd7bed40a34bf3f4ce74c487e84746670843a5bbcb1ef84d48698c04f68f33809780e4b91af3d684a25819c8c1cd2af783da2708ad1987c5ef10e971b7e0bd6b0d34e5e25d12349b9dde69998cb2aa7f6c441caed38db85fdec05f98cf917bfd2c53653908b82aa085a499fff632f46340e25f6cc1f37e9cbe5f483f9e25a2d8e6cf5f7a218268c3675f44cf0e00458d6c3f315fc4fe72d25623d9a6473275219a7021c09102078b9122919382cfafe0304f9a3cefb5405856821ce2fb8b39abab09088ae8266f30018a3d10bbb19cb80b6ee054b43ad8671a23cddeea033f55707aca46a215c146de44be9fb7bc97ab7a4435a4ac332b34b6b5575dcd1bf56bf9cc579ba8204ed7540c8e6c25c0c874f4be41d69cce692ff93e7b984e99fef888a3df3fcb44b8b9252826abad979208162a82b803f1bc731f36c56a0601ad5de0c4650caf7a76ee352f971f9f89640486a4bfdd36b9ae024cdbb32f5766ad5a34c299c96065c5b6550462097007b4ceceac4710c21172f9fc232a7620cc10d5c7188afb57f79e6eb5eca785f0984ab9af52120c2576ac8f69a554b0e501096b22fb5a0baf9225e979b04ff24013e2bbc788c21ee5ef2b29451c36a78a5ef64825e4b389e6e51f07883838f15659efa8c053a35314007beb426b5cc2c5de7bf9593493024310e0e6ae2bd6766ef5aacd4f5798273335adbfb22cdcc4c0e85c911618ce5127e3daba4c75a7a1c0ddb71d300cf194605c0e4972871f0cf116acadacbeb3370043e43537202c58c1ac50a85ab6ed53da5e7464c5fe24e7415c3d045d93280ed79ee0ffca21c0f0e612dd1649a069ed9ccb406091567879e2b59aed9bcea1f3895350f3b07274a86523b181833bc2db245e4607ce28a65985f018f0e6c33961c9f5114e70e74134b9bffa143cbd88726181074175933b22ddfde5b494017e10bdd28947e23c6cdf525eee7492e34bca7311e36982131f400fee22238ee78d7194a645c6168a7b81e9f1032061e631557bf06eda22d78bfdfd468d03fdbaf5ab3d09fbf58bcd8f0fd08a3c2ef8d9c8953631678660780cabbaf0304ae0384e1c419c347471489422eabf153af451dc66850e5d8b816d518b45686eafc887df19c3c5c154b2c510ecd7874c58b6d5e5f4a00f240ac2dd901badd28ad8ed31acb9c162a93e890298153296873097a9f27516a0e544cb950307e1ac07d55fbcbe7c2defd58788abe5bf9368e59f37c42bc3aeb341fa4ba3532e5913271cf6cd01bbd560ae28ee0a1951bde8e397dc6b64045c3b95fe52247aa00919b2f59ad52733b35d81ca162e0c114fab64f15d037d38b5c3a956c15f96d292990f68a30275b3b800e4dd9e54289afdf14b044b43953a63e58af593103c9b9d23c1125fd5ca1495486c35b8cf205f9ad01e342a0fe75c88d5cc4e2381958825fb1931ef478523e45130c5577c9b44d5a000a974b0e3912969c4b0d83262f336f7145e5de74978acfeaae14a92035e4fcaf595fd33a61d1a43b6982e70ee6d531184c1a4d4664cd3a17381017a431c604f2a88d122e50c24b808276db0cd3d8eba7213512747621b382808b16fbadefc0d6069b6316fc0394877a8f32b6b2d031a3ea7a48db9f74f39ba1fc676f275c050fee0cc16b6eaf1fdb40ae3558006a12b7dd8ca44be69bbe22dd98273e83aaf716b35690fd4b3958cb645bf75016a619b3d7c940bd3aa5d255ee517ecb1f6b9134630be3bafc244aefdd0dfd366147917c391f179359e034ba5a0ceb5e8336ca4aa4e08905c9853a3cbdb708eddf02207aa0f8d59d08b76aff7b30113c5e3a8c317e72e634e4aac36f10270c4e03ab98930d032bed847264f3310199fd68402022a560b4c22e9a42cb7cb3118a26a1b903312873ec8173760867d9d6b7f95bdca1c5b0c04de3c20a4001f8d4565fd9bcdaf03c948099e94f45ade7759690414e63c702de3477c08097c50fbabd77dfdecb3272fb8cdab0dd84d5065f50316a930de234052a9973dff4eb50728a33f8b7e16e61212da27522c0d3b0366f61f1533e961c00a624dc9a710241e2f90e1970a3d335e87878cc37f02ae3260bfe314d616e954979a9d26e075d1c4dca34028ef95f8ebacdfe47bd32de64aecbc1bc9bbc2d8415f970c25f11bbedd866354d294bdb53b99a16038b9e4a9510507826140b931f9b731662e3c0581326f333de151ae0ca5814e421147a0de1a9ebb8c53f4a941d661755586ef4c1b8a535718af423ba69260014c45e798a1b1ee7cc55962988c3eebea45ced977524c8ec34672e34fcb3d3bba2a71ee3a2b0dd6b6928f40db3d72f7476d2b85c921f32b2f1833b091be567d863ff360c2d0f4bbff474bdc2dc9402fbc3295ac7cd982952cd5405c8f4f2551334a297bb8c45dbe6f94f2807b0bde2b07c6c6e295409344ad247b0c252a996cc569e9a2175423ac49e04fdc784c41f19a9b006ea078a2d37f8be7fef4dfa16885ae1b8a1dc951858c1c184db589b5b274a855fe5483785f00fdced960834ef5ac69e77d48fd3dc41c384e6d02db9918dd998e410334c6e3a13af1d6fda7d97068fb5fba78bab9a194c3b380095ff037a19a5d4d87e6591872c4ee4ff965917285a232bf8932e677953e15ca6f3c2b6b365207e2927f88cabbce320170a12c6010d45c14fc508d2e789f994eba18b43d471438719d6ad11da3a7c05cb4f5e0cee9ffebdc72ef7efcf1037276f8a2fd1fa1418f3acd39536a910c63531869632fdb51cc8d4045015fcda3c17d79dc73a58b527d28ff4fc673494e91acb7cb0280752272aabc0cee1af78a2edfcde9ae9e1731bf0ff483c6cddad489fe8ebc50b634ac418dd3afced73ce6a8fd23a088f22a0a9344010d362077996b778ad08a0c2ac0ddf0c9a45612d858910aa48b183d76f6b69991c354cdf2d1ce9e2c7eac0da442d8d032f2daec9b934d653e539f0a74539d38ffcf58cc0e5ac5906b990e7f5fd486f80b58a329cf074235d42aeb1f6a8c783b1dce33cab709d7f28209147d959fc79b0f12200e2c33b44764536b32a5e8d71d546698524f15bcc44b2d5825b063bf0874a082594a2d16a7f23d31adff5442a971ca00bfcd2f1b690c42262e82700c70da98dc633e62e3600efe87f0d27ac860bb00cd36a70f55635f0e3b974148a27628407b4b376b13891204d9cdf01b3655063c0bd082314749a510fe53e26c847f39f5d6a5964b145173432cf0189d8d06714ce992a52e51e969d71a6208c11e178090a818b8bc97e57126e6ae0f5c0cf15de59551a566425b60c395982dd48ecee627cdd4a6bf06b51f9e472766a440519ddf430930f2790e6e95593c8cbbaf95e37efa5e4a4ac36c9cf94fa2be805bcf97abd19eb9dac8f564244c79e1ff6d90f18ca0c93d58f5501a97156e34aa32d6d8867eb2452305af12b5cffcb08de12b6502a44365f045ee86b1c5e8e424293d5ac221c3e158a6c7f7152b73546e874b09a5ce5ccd21b1600be33ad80cf7595e9bf16a0e47c3edb00e4c8a77e1b9f7b71c445a3974fb2c26f0b4fcf7f6d328a7b7e6e7300632f5a8d80882c04884b6614db67b982f957e77a3e3a7b3fa2c04ab3a544d5a717ad9de783bab79d1556b8195a5e7be4512156f7837f771a7aab9c6552283f20702c90119ee680c0ed775719d10189ed14090af8255be7a6122ca32d4b5b263affd09ed9ed41842c07fe47fb6008e94ada20058b4ca5ed9f38f6459b528602d4dd0983252ce7f7c17ac5e0b956b7497c52245a9096518d1fb007374013459377f31ecb223643031ca19545563289c17fc1fc643cf693f082ec134b766295b4f70e7f77a992eeada7ae6dfa65ff00c82fdc7568b8dbef9471ce184e7ae3f7ece5d8e2e782711b3ab79f69a79ac186563dce3a4e6deeeb80df794f4d77253f083b3a2038c925976a3f16003cf2aae5fd1ed9ad3cb4ed1c2d41e948af7970c4e52797107c0840fad86166f2c63305090609115b4e9d29c3666819a442c8e613215bc38fe1d2bc1dc782e54ef3dd49daf51352467e38af086918e8e1943479ff135b5183723fc65f0680852428f64b8b44a7cb3b9f47845093732246da81e887a1707eb69c1ebb76ba90ff1c40d388bb7a6b582a9f67e082072d495185b891b5f0a0b747ebfdd0c8b99f6ae73c7e6612118c7b30c4f32350c77f687d79ed1777b729ab8e12ced66853a52f49b6c8bc19f62f9892e8839509c1ccfd121b9d0da27691d52694db593dd6f6f25dff782fa4da8bd810c0593cfee79f89bd482cc31caea430d22583737957b3a845a5d8b7733d2d5cb302c1cbb6ab627553d7a896edf43bf1a58518903ed969fd43871cbe50a927092a3b499250bbcbef30cf3593ebb59055d5a6f46aa8d1df7ac2ac54bb25e0f953829eb112cd51fcc43f09f0a54348a2f476a910040a260bc9b0e3d5d8794fbfe997a3d7e9b0bbe0b3f6c9ba8f2ccf15cf0928bd6295e511b945e9246aaa197ad79fafaa3a8859d6d886bf44b0388b758ab2480fe15c63e39051bb554650217d246c5e6c8c1c0cc14938c61079738ddfdfc864d77c81fa14afd275e1fc0725032176b97f674ed26c9adca91c8da9720bb9fe991d15f2baace48293794277cd12dd5d9f2f01e7fb5d3171cfdea1da880307561e16855fb6011912a8868b6fb05a8408d445756a9f52964eff5ae2c8b1954800d1caeba42f7c1a248145a46403a29e5da9df723d551cea9b7762acbd7aef587a6fd609e852a95dafda424b543632a62727e7d45817d6fa8f8505a91a0d4056fc91e556b4e9336f6204333e2064d1968f13a40a7c67f8c7bde966c489d89b7e945c0f0041e535c24e165d5216275ede2628555d650df816731cf7cf088bfeb43cba05262aeb6cd21e783d2db46c9a6d70b4c846338bf2e5f8499e7ae535ccb311282140cf4df9f332a06938b6aaa2819eaba888bb7d9bf5ef852924ecb9ccb14fef16f0847f8b4562a952395f61a4c430efedb383d23c3281416fca316b96217d878c8059b616b55532b577adcfc211f1f01a98208a0788428f9002fc684643e2b9040277c0067f924f0dae153c43cbe397dca9017bdc744f5557dbf5a1af02b80884abde82e34c6c4b5bab50196bacbc9b05e2c87524c6ec50be4f036cf61943f052447456d7f6086d61c87be7936bca156167bc4d59046e51cecc97f3b12dca103044ca38dd956d97531295721e82107913be1f96e0f9a2078d7a9bf298c2a8f7051bf4900b56e4082ab7ff7af426dcc413ee51fc53e695eda3422c900c30afa609d25c219305c4bc99166a3219663b03cb4436d8b6ef3a6e31d6ce131c38c1c7702c67fe1e105de868aec42d9f4756f3500c0b418df47977d3c3569bc1bc6ec776182f16b02aa2924f7dc53ba7e7dd63abe4c4f51b27ad44bee2572d83fe6ec3de2738f28468a7fce8415f66f12bc74354c456cd9d28f84b97979427de6b7785e7c972a659045857d6519cd2227ba3310e675f1b3111c3396ffa962549d74aa49ce6168ea434e16f2063a2eeb2d42474e64a636f1be866f4fc6e066a25563cf359a9f055804d9362b909de761b1fa8de2b8dd41b18897de534a165601b31fcfc4f27e61328ce6ae841d2e7d5e674bd72104a2fc7431e37a444b5f5314e210869e21a9bb9cc9fe752a462ebf86e3f8c16405bec534ed8d0893d772df91fd01eeefbc8895c6d8cfe7d7ddada8aaeb1462306c4aaf8d8b5961ea6d3f89e05317a92c43bd7db31ed1d55b81aca9b99f239e5dc7622f99fa87c60190384581d458ddbdaf20afca5f4e1a712e6ce0c3ef4e66bfb7037b11f23b0dbb8a10e34b9d0af14bf1c33a99752e14dce2e74e68a9c3548d056f9c8140bb7908f79c32921302c43d58bad639df3a715b66d40420139bbfb62f1ed3f36b47bac3b43e82df6d161f0c994e2d65291e0fa7ab54d636a5baed7e588281972b20740e3c2c3941226e228ca3b5519b6664413e7e2f6dc9abac8420e9d3f16460cd65603bcfc7d3224878a50864cb472f20c4369e7c43ce1d959e7667e18e843ef384b213cac7c6a0d07ce8470f2003df46ce6a360ec9343e2f484061db2cc2c36d0423fbd10c7317600c72cdc225ba72a88de3e79876005004ca22d2c0af0378859b8bb45e89b666a1727889b06ae1046daafd04408419c36c02710b60cce67485153a3ad07716750eef538f44f6b23ffd7123eecf8515fe07bfd2a4e6a7b3e1423b8784053262feecf3e1e150c4a88a993eb67ed5afe7d2def9115e377e56b167000acf58f01436f4b82b16b783b7311902900402e3478f9da7dd1c47af0725388589177efe41726423adf81c19dba07213ed039f29c840e6b219b08356ff9fd55e7ba323f4f9f9370b327fa8068e75e7058e5994ffedfa88c2dfaeae93714105729376f632398c2006a5db36d573fed7a1ed633598db881902a1baecc500230fefa5279307653bbbcd9982854dab236dfa9b883090e2a5e2346cdd1969b5e819e5c1844a93b8c6f9c80fcacc1708846330fe586914738516820617be0531fa9b07ac353847c591c34089fe6b813a42a210a3e92e7e5e4557425a90dfc8005167a971d99760358f63d892b00844edec367503d96477a67c33d15bea3a521869eb13433fd1d4b07a1d534976451d9aaf8659a30830a508e18dab6191d93efe90064f29f3c280b6f53bde00f6803bd80ba98ec351a386bb27fd880d575586b6024792be7b6ce87a6d88573b1470591cda199d836f49166fe88b6e8de59cd52f88ef931580a46dbe48f103d80560c708dd589b1408ff3cc072699c0d17bfc6c9238ed2afb682d0baa4dd9e4655d92f69de01463203bb2f007cdab40cac31d6d26b012ad757885e03fd0324c39e1b350cb631e7106bf04ae9d8d3cc201726109d3a6a461bba0328d0b38c080d2cbfc52a3741e326061a66f1187660b39825643d5064de2399e878237bc18822fa024d2a491f65f3c53bc32492eb26095cc1eb125ce81589836cde68cfc31db407f6f501f0cccd76eeab6e38e9bd762db1f886df6fa892b4f63123421b2bb8d4c53492241e43dea22228cace139db184a587690c8524e71150a23cece9b9ee37374aece3d0c611e1f8dc1a6fb07d5edfb95ed43c94a4ab71ab6f8256f70072a44c044e8585cefa3f86b728375e23054427d6095c4baaea1bcf0a8ac60aae506b09e80a9330b4f2beb028375eb37fe10a467e63ea936f731b06684ced8faa31a68f6d14eda3d63245de64240c60c582d644b605a133ed8b1e08d7cc06d2c011d28485e1b0cd451162f8028723d1ddaa1879a1af155e1f3b20022aba6f8dbb027c24cbf136e4aadb27edc03a6048f21b8950a481ea0b41b061b289e78f93df91694406151dff99cb466047cd962c82798f48ea4e4d18103b5f13225f8734d043528db4adecf66d3da0eaabe1c8f9bc9316f977be626878938439f244b62a2664a650466c92c6fa709a51713491e25cbbef3ae73e5750e2a34bc1099dc3b4483879f5aad4f178847a6c5f378c340c0c90b37e2a150cede565fe85e939b981d631d84a355d99e5d462fdf1a7c7666a19b690b50f9b2205135fc22f68ad8a53347bcb7c431103dcad200f78dd733fa3cc6aad15cf4f53c65b4aa10fee9ed1639e422e35f512d1218b4d81af94d2091283bacdd322a08670f6cb9495d28193905000a162114bde5bd90db9b449f2a131a4037877c724b663350ad793ed0b9515b3075f15283be9d6d1d97d9f783cf1430210dc82df6cda35aba2f8c1d30a51eb63e4c81b523176cf8fd1758dd940a7f7e2424b52eadb33f026f148da6f3ff5c83de335d1270a08b2c0c408bc7ee264cf0de8b6c0531b984a08912bbf6a66af315dfa225e5597414cbf3e11383f754f542625f163ab63b1b98bd45a091fb6b79f0c1f238b3b9bd22bc1f1f3a6498536f3e94220d0134ae7940c3fa7691b33d2a826e506332722025cfc1e75f74178a3381b671d77cf9f5bba313d5a67b8d86766158d80570161f54cc44ed1071a01abd62e1ac69c8d436b15960a1ebb789e9710042d66744902a68855199c9be53f5f45c8921c8e9efdf903b4bf3106d853750d3eac52cc71c06ad4d569b7c03a9ed66715f9115c0cae0d9cba3888dbf0861d9ded2fdf1d0d54d83431b4de28c6a5eceb643c7cb7d567593441f40d4f712bbdf9bc498e820071793177676373c494b328910f3d35c5ae5720a0c92b4e8d7ef3227974c92b3aac9244bd0ccfe8a2186daa506d7e3416895a2c38320abbe5736e9e14c745c445729bf366b3d926f5d11faf42b933228156dd091cf43a58c0cdce6b79f532ed6e356c86dca3db4715c89e45d66990f9e813206408c008436a7f42fea89d8be6f77bf6c98becd4806c5ced51533e3e889951cce586b04caacfb0902f8a9b0a98c66b226ae189804468d9af5b8ef4ddd513110c205378e758d5abe241f0138c09abfe896899f11a5db2e623a61882bc2e97c436f9ed0a98b28f0a71058243d0a5db3e4d6a83cd86bc11b99a14200ca3732154f8358c739afed58ca0d905d1da81151c20fd4758ce670561326206c5491dbed78a8673c85d65b41d5bc202330ab3af601516625fbb59ea6af7e0f8661427c3f7b07e8b4f4e462db0cd1531c1d97f6760a7a1837a19ed3a35e625ccb59c826cc44ed4f64d7074a25968caa14eefdbfc841951e066c5a5747d4f7e942477cd7510129ee630af88a622e2cffd5f900b5f214b186f55fbab218db7513cb8404581b5b407acd10136f50e379e1ef3f71b8387ea553c73ed66ef29ced2ed6a2e858aaf83bb4de28b6974b7bf63c97400c0e5f8d0eab13f6a4ea31d7f5ef047dcef248f252bf6776be07c755e7a3b957368d2bbc5e28cc2f850b620261e5bd3696455db80ec781901042bfc11ff58c5a022e37c2ddd974a71fab4394c91b618b76bbd1bc87f30f92bc4ef95182e6a536b7d078a936009720ca208e2b8275cf49002639315fd44f1bb5a86bf9db21eda63186601ad951eca2e21f37284d0ef4f21c38272e2c51b1726e0bd40f2f8d9166ab4da138c46a1307c39b64a24a487b6d02daca35c869e8ef68f21413485426d404275f328c4ebfe641af7c8d715d40e844e0f4825b672295c08c39f360d994c91f40ac9cebe271048a7f05322f9658598c2c0e8f0e239e738b0b2b0398b98ae22478cabc24ab51958af812c41135891a16da3a0f2117e6dba5390082c396880d2ba09e95bf199ae1f1c931df2a5af0ceddaff3fcb0ba2df6fe22136aa26c4df834f68293873a754543ffa821676dc0855cce31e238d70cbf0782e53170b7c61063564b438a56c7cec58eb9b07dc7a3afc60d19b63314b889f4f31e1ec9f73e12d50861b349ba074e2d04b6fdc2841586bb9260d4916c2b1c4c0afe274e0e86bf156dbf31d494fe031f688aad087487b93781d89d0c7dcf1b47c472edee8ced9dabee933fd5c85c58cb6f65bbfad19ae37f513958d1a2ab47d9a764585e15c1aa6f07a368737851d484871e950c512396500776bb3bea9c70b5c3a5693a8b0df6230fa4ab4395161c96c6768b54cda58928628ddd76eeebc43bc9b02f0114e3593dbda9e8a85a28</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-default\">\n      <input class=\"hbe hbe-input-field hbe-input-field-default\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-default\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-default\">您好, 这里需要密码.</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">",
            "tags": [
                "原创",
                "逆向",
                "汇编"
            ]
        },
        {
            "id": "https://w-sqrt7.gitee.io/2024/03/01/mihao-note/%E7%B1%B3%E5%A5%BD%E4%BF%A1%E5%AE%89-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/",
            "url": "https://w-sqrt7.gitee.io/2024/03/01/mihao-note/%E7%B1%B3%E5%A5%BD%E4%BF%A1%E5%AE%89-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/",
            "title": "米好信安课程笔记-信息收集",
            "date_published": "2024-03-01T09:14:36.657Z",
            "content_html": "<h1 id=\"米好信息安全课程笔记\"><a href=\"#米好信息安全课程笔记\" class=\"headerlink\" title=\"米好信息安全课程笔记\"></a>米好信息安全课程笔记</h1><h1 id=\"基础课程-信息收集\"><a href=\"#基础课程-信息收集\" class=\"headerlink\" title=\"基础课程-信息收集\"></a>基础课程-信息收集</h1><h2 id=\"课时一-WHOIS查询\"><a href=\"#课时一-WHOIS查询\" class=\"headerlink\" title=\"课时一 WHOIS查询\"></a>课时一 WHOIS查询</h2><p>查询域名的各种信息，如注册商，联系人，联系邮箱，创建时间，过期时间等。。。</p>\n<p>1.网站</p>\n<p>可直接网站上进行查询，如站长之家，whois.chinaz.com等，可自行搜索</p>\n<p>2.whois命令行</p>\n<p>下载链接：<a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/whois\">https://docs.microsoft.com/en-us/sysinternals/downloads/whois</a></p>\n<p>下载解压后，把whois.exe并复制到C:\\Windows\\System32目录下即可</p>\n<p>基本使用方法是：whois+域名，更多方法可参考help帮助命令</p>\n<p>Centos下安装命令如下：yum install -y whois</p>\n<p>WHOIS命令语法：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">whois: [-4|-6] [-h host|--host=host] [-p port|--port=port] -k|query</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>[-4|-6]</code>: 这两个选项指定使用哪种 IP 版本进行查询。<code>-4</code> 表示使用 IPv4，而 <code>-6</code> 表示使用 IPv6。</li>\n<li><code>[-h host|--host=host]</code>: 这个选项允许您指定用于查询的 WHOIS 服务器。通常，<code>whois</code> 命令会自动选择一个合适的服务器，但如果您知道特定的服务器更可靠或更合适，您可以使用此选项来指定。</li>\n<li><code>[-p port|--port=port]</code>: 这个选项允许您指定用于连接到 WHOIS 服务器的端口。默认情况下，<code>whois</code> 使用标准的 WHOIS 端口。</li>\n<li><code>-k|query</code>: 这个选项表示要查询的域名或 IP 地址。在 <code>-k</code> 之后，您应该直接跟上您想要查询的域名或 IP 地址。如果您选择使用 <code>query</code> 选项，那么您应该在 <code>query</code> 之后指定要查询的内容。</li>\n</ul>\n<p>一个典型的 <code>whois</code> 查询命令可能如下所示：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">whois -h whois.example.com example.com</span><br></pre></td></tr></table></figure>\n\n<p>在这个例子中，我们指定了使用 <code>whois.example.com</code> 作为查询的 WHOIS 服务器，并查询了 <code>example.com</code> 域名的注册信息。</p>\n<p>3.利用whois查询IP信息</p>\n<p><a href=\"https://ip.rst.im/whois%E6%A3%80%E7%B4%A2IP%E5%9C%B0%E5%9D%80%E6%89%80%E5%B1%9E%E7%9A%84%E7%BD%91%E6%AE%B5%EF%BC%8CAS%E5%8F%B7%EF%BC%8C%E6%B3%A8%E5%86%8C%E6%97%B6%E9%97%B4\">https://ip.rst.im/whois检索IP地址所属的网段，AS号，注册时间</a></p>\n<p><a href=\"https://www.viewdns.info查询同一名下的其他网站信息/\">https://www.viewdns.info查询同一名下的其他网站信息</a></p>\n<h2 id=\"课时二-Google-Hacking\"><a href=\"#课时二-Google-Hacking\" class=\"headerlink\" title=\"课时二 Google Hacking\"></a>课时二 Google Hacking</h2><p>1.GoogleHacking是一种利用搜索引擎获取web应用程序弱点和敏感信息的手段<br>2.GoogleHacking是一种以合法的方式获取非法或未授权信息的手段。<br>3.Google Hacking是所有利用搜索引擎进行攻击的一个典型。</p>\n<p><code>操作符</code></p>\n<ol>\n<li>+\t把Google可能忽略的字列入查询范围</li>\n<li>-     把某个字忽略</li>\n<li>~    同意词</li>\n<li>*    通配符</li>\n<li>“”   精确查找</li>\n<li>OR  或</li>\n</ol>\n<p><code>关键词搜索</code></p>\n<ol>\n<li><p>site          搜索一个特定站点的详细内容</p>\n</li>\n<li><p>intitle      索网页标题中的某个特定字符串</p>\n</li>\n<li><p>inurl        搜索网页URL地址中的某个特定字符</p>\n</li>\n<li><p>filetype   搜索指定类型的文件</p>\n</li>\n<li><p>link          索和某个站点做了链接的所有URL</p>\n</li>\n<li><p>intext      搜索网页面正文内容中的某个特定字符串</p>\n</li>\n<li><p>info         搜索指定站点的一些基本信息</p>\n</li>\n<li><p>all            所有关键字前都加上all可以得到更加精确详细的信息</p>\n</li>\n</ol>\n<p><code>示例</code></p>\n<p>找出开放远程桌面Web连接的服务器<br>1.远程桌面Web-远程桌面的 Web版本<br>2.可通过口令破解攻破设置了弱口令的服务器</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">allinurl:tsweb/deault.htm site:com</span><br></pre></td></tr></table></figure>\n\n\n\n<p>尝试找出学生身份证号和QQ号信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">filetype:xls 身份证号 site:edu.cn</span><br><span class=\"line\">filetype:xls QQ号 site:edu.cn</span><br></pre></td></tr></table></figure>\n\n\n\n<p>查找可以未经授权就可以访问的phpMyAdmin的后台页面</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inurl:.php? intext:CHARACTER_SETS,COLLATIONS,?intitle:phpmyadmin</span><br></pre></td></tr></table></figure>\n\n\n\n<p>查找管理员登录页面</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inurl:/phpmyadmin/index.php</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时三-Shodan搜索引擎的介绍与使用\"><a href=\"#课时三-Shodan搜索引擎的介绍与使用\" class=\"headerlink\" title=\"课时三 Shodan搜索引擎的介绍与使用\"></a>课时三 Shodan搜索引擎的介绍与使用</h2><p>Shodan是一个搜索引擎，是用来搜索网络空间中在线设备的，可以通过Shodan搜索指定的设备、或者搜索特定类型的设备。<br>Shodan上最受欢迎的搜索内容是：webcam，linksys，cisconetgear，SCADA等等。</p>\n<p>Shodan能找到的设备<br>服务器\t网络摄像头\t路由器\t加油站的泵\t交换机 \tVoip电话和所有数据采集监控系统\t公共ip的打印机</p>\n<p>Shodan与Google的区别</p>\n<ol>\n<li>Google的爬虫抓取网页数据并为网页内容创建索引，然后根据pagerank显示结果</li>\n<li>Shodan主要寻找端口并抓取拦截到的信息，然后为它们建立素引，最后显示结果。</li>\n<li>Shodan并不像google那样为网页内容建立素引，因此它是一个基于拦截器的搜索引擎</li>\n</ol>\n<p><code>搜索语法</code></p>\n<ol>\n<li>hostname：搜索主机或域名，例如hostname:”google”</li>\n<li>port：搜索指定的端口或服务，例如port:”21”</li>\n<li>country：搜索指定的国家，例如country:”CN</li>\n<li>city：搜索指定的城市，例如city:”Hefei”</li>\n<li>org：搜索指定的组织或公司，例如org:”google”</li>\n<li>isp：搜索指定的ISP供应商，例如iisp:”China Telecom”</li>\n<li>product：搜索指定的操作系统&#x2F;软件&#x2F;平台，例product:”Apache httpd”</li>\n<li>version：搜索指定的软件版本，例如version:”1.6.2”</li>\n<li>geo：搜索指定的地理位置，例如geo:”31.8639,117.2808”</li>\n<li>net：搜索指定的IP地址或子网，例如net:”210.45.240.0&#x2F;24”</li>\n<li>before&#x2F;after：搜索指定收录时间前后的数据，格式为dd-mm-yy，例如before:”11-11-15”</li>\n</ol>\n<p><code>示例</code></p>\n<p>查找位于合肥的Apache服务器：apache city:”Hefei”</p>\n<p>查找指定网段的华为设备：huawei net:”61.191.146.0&#x2F;24”</p>\n<p>shodan搜索框里输入指定的日标，可以是IP地址或者域名</p>\n<h2 id=\"课时四-ZoomEye搜索引擎的介绍与使用\"><a href=\"#课时四-ZoomEye搜索引擎的介绍与使用\" class=\"headerlink\" title=\"课时四 ZoomEye搜索引擎的介绍与使用\"></a>课时四 ZoomEye搜索引擎的介绍与使用</h2><p>ZoomEye，它是一个搜索引擎，搜索对象是网络空间中的 WEB服务组件” 和 网络设备，为白帽子黑客和极客服务的，兼顾宏观和微观，支持公网设备指纹检和Web指纹检索</p>\n<p>可识别的网络设备：交换机，路由器，摄像头，手机，平板电脑，工控设备……</p>\n<p><code>ZoomEye的搜索语法</code><br>1.搜应用&#x2F;版本，比如php:5.3.*</p>\n<p>2.搜国家&#x2F;城市，比如php:5.3.17city:beijing 或 php:5.3.17country:CN</p>\n<p>3.搜网站标题，比如title:Nginx</p>\n<p>4.搜网站域名，如site:*.baidu.com</p>\n<p>5.特殊词语，如hackedby</p>\n<p>6.搜网络设备，如GoAhead-Webs</p>\n<p><code>示例</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dedecms Country:CN</span><br><span class=\"line\">app:&quot;wordpress&quot;</span><br><span class=\"line\">port:22</span><br><span class=\"line\">os:linux</span><br><span class=\"line\">ip:8.8.8.8</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时五-在线社工库密码收集\"><a href=\"#课时五-在线社工库密码收集\" class=\"headerlink\" title=\"课时五 在线社工库密码收集\"></a>课时五 在线社工库密码收集</h2><p>拖库</p>\n<p>指的是骇客入侵有价值的网站，把注册用户的资料数据库全部盗走的行为，因为谐音，所以也常被称作“脱裤”</p>\n<p>洗库</p>\n<p>在取得大量的用户数据之后，骇客会通过一系列的技术手段和黑色产业链，将有价值的用户数据变成现金以达到非法获利的目的。这一过程被称为 “洗库”</p>\n<p>撞库</p>\n<p>骇客首先通过收集互联网已泄露的用户+密码信息，生成对应的字典表然后用字典中罗列的用户和密码，尝试批量登陆其他网站，这样，一旦用户为了省事，在多个网站设置了同样的用户名和密码的话，骇客很容易就会通过字典中已有的信息登录到这些网站，从而相关信息</p>\n<p>！！！目前，大部分的社工库都被ban掉的，很难找到资源，但可以尝试在GitHub，Google上查找搜索可用的社工库，但注意，价格可不便宜啊！！！</p>\n<h2 id=\"课时六-DNS查询\"><a href=\"#课时六-DNS查询\" class=\"headerlink\" title=\"课时六 DNS查询\"></a>课时六 DNS查询</h2><p> DNS（DomainNameSystem，域名管理系统）是因特网的重要基础。它建立在一个分布式数据库基础之上，在这个数据库里，保存了IP地址和域名的相互映射关系</p>\n<p><code>常用的DNS记录</code></p>\n<p>A                   ip地址记录，记录域名对应的ip地址</p>\n<p>AAAA            ipv6地址记录，记录域名对应的ipv6地址</p>\n<p>CNAME         别名记录，记录一个主机的别名</p>\n<p>MX                 邮件交换记录，记录一个邮件域名对应的ip地址</p>\n<p>NS                  域名服务器记录，记录该域名由哪台域名服务器解析</p>\n<p>PTR                反向记录，即从ip地址到域名的一条记录</p>\n<p>TXT                记录域名的相关文本信息</p>\n<p><code>DNS域传送漏洞</code></p>\n<ol>\n<li>DNS服务器分为：主服务器、备份服务器和缓存服务器，在主备服务器之间同步数据库，需要使用 DNS域传送</li>\n<li>域传送是指后备服务器从主服务器贝数据，并用得到的数据更新目身数据库</li>\n<li>若DNS服务器配置不当，可能导致名用户获取某个域的所有记录。造成整个网络的拓扑结构泄露给潜在的攻击者，包括一些安全性较低的内部主机，如测试服务器。凭借这份网络蓝图，攻击者可以节省很少的扫描时间。</li>\n</ol>\n<p><code>DNS查询</code><br><code>nslookup命令</code></p>\n<ol>\n<li>输入nslookup命令进入交互式shell</li>\n<li>server  命令参数设定查询要使用的DNS服务器</li>\n<li>ls DOMAIN   出某个域中的所有域名，如”ls -d hzmc.edu.cn”</li>\n<li>exit  退出程序</li>\n</ol>\n<p><code>dig命令</code></p>\n<p>在Linux中可以使用dig测试DNS服务器是否存在域传送泄露<br>Dig是一个非常强大的DNS查询工具，输入”dig -h”命令即可查看帮助命令。</p>\n<p>dig命令检测DNS域传送漏洞：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dig @dns.hzmc.edu.cn axfr hzmc.edu.cn</span><br></pre></td></tr></table></figure>\n\n<p>使用dig命令来检测DNS域传送（AXFR）漏洞是一种安全测试方法，用于检查一个DNS服务器是否允许未经授权的区域文件传输。</p>\n<p>如果服务器允许AXFR查询，并且你拥有足够的权限，这个命令将返回hzmc.edu.cn域名的完整DNS区域文件。区域文件包含了域中的所有DNS记录，如A记录、AAAA记录、CNAME记录等。</p>\n<p>如果服务器不允许AXFR查询，或者你没有足够的权限，你将收到一个错误消息，通常是REFUSED或NOTAUTH。</p>\n<p><code>攻击者可能获得的敏感信息包括：</code></p>\n<ol>\n<li>网络的拓扑结构，服务器集中的IP地址段</li>\n<li>数据库服务器的IP地址，例如nwpudb2.nwpu.edu.cn</li>\n<li>测试服务器的IP地址，例如test.nwpu.edu.cn</li>\n<li>VPN服务器地址泄露</li>\n<li>其他敏感服务器</li>\n</ol>\n<h2 id=\"课时七-邮箱收集\"><a href=\"#课时七-邮箱收集\" class=\"headerlink\" title=\"课时七 邮箱收集\"></a>课时七 邮箱收集</h2><p><code>为什么进行邮箱收集</code></p>\n<ol>\n<li>企业员工邮箱账号收集的手段</li>\n<li>邮件钓鱼攻击</li>\n<li>社会工程学攻击</li>\n</ol>\n<p><code>TheHarvester</code></p>\n<p>TheHarvester是一个社会工程学工具，它通过搜索引擎、PGP服务器以及Shodan数据库收集目标的Email，子域名，主机，员名，开放端口和banner信息。<br>    下载地址：<a href=\"https://github.com/laramies/theHarvester\">https://github.com/laramies/theHarvester</a><br>    此版本为修改版，增加了百度搜索引擎，无需翻墙即可使用。</p>\n<p><code>参数说明</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. -d: Domain to search or companyname</span><br><span class=\"line\">2. -b: data source: google， bingbingapipgp，all</span><br><span class=\"line\">3. -f:Save thee resultsinto an HTML and XML file Cboth）</span><br><span class=\"line\">4. -l:Limit the number of results</span><br></pre></td></tr></table></figure>\n\n<p>示例</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python theHarvester.py -d wooyun.org -b baidu -l 500</span><br></pre></td></tr></table></figure>\n\n<p>-d wooyun.org: -d 参数后面跟的是你想要查询的域名，这里是 wooyun.org。<br>-b baidu: -b 参数指定要使用的搜索引擎或其他数据源。在这里，baidu 是指使用百度搜索引擎进行搜索。theHarvester 支持多种搜索引擎和其他数据源，如 Google、Bing、Yandex、DNS记录等。<br>-l 500: -l 参数指定要返回的结果数量。在这个例子中，500 表示返回最多500条结果。</p>\n<p><code>MSF邮箱收集模块</code><br>MSF（Metasploit）是一款开源的安全漏洞检测工具，可以帮助安全和IT专业人士识别安全性问题，验证漏洞的缓解措施，并对网络系统的安全性进行评估，提供真正的安全风险情报。这些功能包括智能开发，代码审计，Web应用程序扫描，社会工程</p>\n<p>   在Metasploit中提供了许多模块，这些模块辅助安全人员完成安全测试工作,其中searchemailcollector模块，它的功能是查找搜索引擎（google、bing、yahoo），收集和某个域名有关的邮箱地址。</p>\n<p><code>命令说明</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.启动MSF：msfconsole</span><br><span class=\"line\">2.使用search_email_collector模块：</span><br><span class=\"line\">     use auxiliary/gather/search_email_collector</span><br><span class=\"line\">3.查看设置项：show options</span><br><span class=\"line\">4.设置DOMAIN：set domain wooyun.org</span><br><span class=\"line\">5.运行模块：run</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时八-主动侦查之Nmap基本用法\"><a href=\"#课时八-主动侦查之Nmap基本用法\" class=\"headerlink\" title=\"课时八 主动侦查之Nmap基本用法\"></a>课时八 主动侦查之Nmap基本用法</h2><p>Nmap NetworkMapper（网络映射器）”）是一款开放源代码的网络探测和安全审核的工具。 它的设计目标是快速地扫描大型网络，Nmap以新颖的方式使用原始IP报文来发现网络中存活主机的信息</p>\n<p>Nmap同时也提供了强大且灵活的脚本引擎，它允许用户编写简单的脚本执行各种自动化的网络任务。当然Nmap也内置了许多在渗透测试中常用的脚本</p>\n<p><code>Nmap主要功能</code><br>主机发现                       漏洞扫描与利用</p>\n<p>端口扫描                       安全审计</p>\n<p>指纹识别与探测\t\t   防火墙&#x2F;IDS逃逸</p>\n<p><code>简单的网络扫描</code></p>\n<ol>\n<li><p>扫描单个网络：nmap 10.254.100.1或<a href=\"http://www.test.com/\">www.test.com</a></p>\n</li>\n<li><p>扫描多个IP：nmap 192.168.1.1 192.168.1.3</p>\n</li>\n<li><p>扫描连续的IP或IP段：nmap 10.254.100.1-10.254.100.99<br>CIDR：nmap10.254.100.1&#x2F;24</p>\n</li>\n<li><p>扫描目标列表：namp -iL list.txt</p>\n</li>\n<li><p>指定端口范围：nmap -p 3389,80-445 192.168.100.3</p>\n</li>\n<li><p>详细描述输出：nmap -vv 192.168.100.3</p>\n</li>\n<li><p>输出扫描结果：nmap -oX test.xml 192.168.100.1&#x2F;24</p>\n</li>\n<li><p>综合扫描：nmap -A 192.168.100.1&#x2F;24</p>\n</li>\n</ol>\n<p><code>示例</code></p>\n<p>1.扫描目标单个主机，输出详细描述，输出扫描结果</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap 10.34.1.145 -VV -oX 123.xml</span><br></pre></td></tr></table></figure>\n\n<p>2.扫描文件列表目标(test.txt内容为目标ip的列表)，并指定端口3389、445、 3306，输出扫描结果。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -iL test.txt -p 3389,445,3306 -oX test.xml</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>Zenmap</code></p>\n<p>nmap的GUI程序，功能相同</p>\n<h2 id=\"课时九-主机发现\"><a href=\"#课时九-主机发现\" class=\"headerlink\" title=\"课时九 主机发现\"></a>课时九 主机发现</h2><p>通常系统管理员可能仅仅使用ping来定位内网中的主机，而一个外部入侵测试人员则可能绞尽脑汁用各种方法试图突破防火墙的封锁，了解自标网络主机的活动情况<br>主机发现有时候也叫ping扫描，但它远远超越了普通的ping工具发送简单的ICMP回声请求报文。Nmap可以进行大规模网络扫描，并可以定制TCP、UDP、ICMP请求方式以绕过目标的一些限制，探测目标主机是否是处于活动状态。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.-sP    \t(ping扫描)仅仅进行ping扫描</span><br><span class=\"line\">2.-Pn     \t跳过主机发现阶段，默认所有主机为活动，继续执行其他扫描</span><br><span class=\"line\">3.-PU\t\t(UDP Ping)它发送一个空的UDP报文给指定的端口，默认为31338 该扫描类型的主要优势是它可以穿越只过滤TCP的防火墙和过滤器。</span><br><span class=\"line\">4.-PS \t\t(TCP SYN Ping)该选项发送一个设置了SYN标志位的空TCP报文。  默认目的端口为80，可指定其它端口，每个端口会被并发扫描</span><br><span class=\"line\">5.-PA     \t(TCP ACK Ping)与TCP SYN相似，设置TCP的ACK标志位</span><br><span class=\"line\">    一般防火墙会封锁SYN报文，ACK报文通常会被识别成伪造的而被丢弃。所以两种方式同时指定使穿透防火墙的可能性比较大</span><br><span class=\"line\">6.ICMPPingTypes</span><br><span class=\"line\">-PE：ICMPEcho扫描方式</span><br><span class=\"line\">-PP：ICMP时间ping扫描</span><br><span class=\"line\">-PM：ICMP地址码ping扫描</span><br><span class=\"line\">当管理员封锁了回声请求报文而忘记其它两种ICMP查询，用于相同目的时非常有效</span><br><span class=\"line\">7.-n\t禁止DNS反向解析</span><br><span class=\"line\">8.-R\t反向解析域名</span><br><span class=\"line\">9.--traceroute\t路由跟踪</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十-端口扫描\"><a href=\"#课时十-端口扫描\" class=\"headerlink\" title=\"课时十 端口扫描\"></a>课时十 端口扫描</h2><p>公认端口</p>\n<p>0～1023，它们绑定特定的服务，端口的通信明确表明了某种服务的协议。例如：80端口是HTTP服务端口。</p>\n<p>注册端口<br>1024~49151，它们松散地绑定一些服务，就是说有许多服务绑定于这些端口，这些端口同样用于许多其它的目的</p>\n<p>动态&#x2F;私有端口<br>49152~65535，这些端口一般不分配服务，有些较为特殊的程序，特别是木马程序非常喜欢使用这些端口，容易隐蔽。</p>\n<p><code>常用的服务器端口</code><br>21\tFTP服务                   443\tHTTPS服务<br>22\tSSH服务                  3389\t远程桌面<br>23\tTelnet服务              8080\tWWW代理服务<br>25\tSMTP服务\t\t\t   80\tHTTP服务</p>\n<p><code>端口扫描技术</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.-p指定扫描端口，Nmap默认扫描1000个常用的端口</span><br><span class=\"line\">2.-sS TCP SYN扫描，扫描速度快，不会完成TCP连接，比较隐蔽</span><br><span class=\"line\">3.-sT TCP连接扫描，当SYN扫描不可用的时候，TCP连接扫描是默认的TCP扫描类型。当用户没有权限发送原始报文或者扫描IPv6网络时，使用此方法</span><br><span class=\"line\">4.-sU UDP扫描，UDP扫描通常比TCP慢和更加困难，一般安全审计会忽略一些UDP端口</span><br><span class=\"line\">5.-sA TCP ACK扫描，无需判断端口的开放情况。 用来绘制出防火墙规则，对哪些端口进行了保护</span><br><span class=\"line\">6.-sW TCP窗口扫描，与ACK扫描类似</span><br><span class=\"line\">7.隐蔽扫描</span><br><span class=\"line\">-sN Null扫描，通过发送非常规的TCP通信数据包对服务器进行探测</span><br><span class=\"line\">-sF FIN扫描，当使用TCPSYN扫描时可能会被目标防火墙发现，止SYN数据包，可以使用FIN扫描会有很好的穿透效果</span><br><span class=\"line\">-sX Xmas扫描，数据包设置FIN,PSH,URG标志位</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十一-操作系统探测\"><a href=\"#课时十一-操作系统探测\" class=\"headerlink\" title=\"课时十一 操作系统探测\"></a>课时十一 操作系统探测</h2><p><code>操作系统探测方法</code><br>操作系统探测主要通过协议栈指纹分析判断目标系统类型</p>\n<p>常用的操作系统判断方法：</p>\n<ol>\n<li>Nmap综合判断</li>\n<li>Web指纹</li>\n<li>Telnet选项指纹</li>\n<li>根据操作系统TTL值判断<br>  Linux操作系统<br>   TTL值一般为64或255Unix<br>   TTL值为255<br>  Windows操作系统<br>   TTL值一般为128</li>\n</ol>\n<p><code>Nmap探测原理</code><br>Nmap发送一系列TCP和UDP报文到远程主机，检查响应中的每一个比特。在进行一系列测试如TCPISN采样，TCP选项支持和排序，IPID采样，和初始窗口大小检查之后，Nmap把结果和数据库nmap-os-fingerprints中超过1500个已知的操作系统的fingerprints进行比较。</p>\n<p>Nmap使用TCP&#x2F;IP协议栈指纹分析进行远程操作系统探测</p>\n<p><code>Nmap操作系统探测参数</code>    </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.-O启动操作系统检测</span><br><span class=\"line\">2.--osscan-limit针对指定的目标进行操作系统检测如果发现一个打开和关闭的TCP端口时，操作系统检测会更有效。  采用这个选项，Nmap只对满足这个条件的主机进行操作系统检测</span><br><span class=\"line\">3.--osscan-guess推测操作系统检测结果当Nmap无法确定所检测的操作系统时，会尽可能地提供最相近的匹配，Nmap默认进行这种匹配</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>探测实例</code><br>1.检测两个目标IP的操作系统类型</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -PS -sS -O 192.168.119.143 192.168.119.139 -oX os.xml</span><br></pre></td></tr></table></figure>\n\n<p>2.使用–osscan-limit参数节约扫描时间<br>其中192.168.119.146为不活动主机</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -PS -sS -O --osscan-limit 192.168.119.146 192.168.119.139 -oX os.xml</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十二-服务和版本探测\"><a href=\"#课时十二-服务和版本探测\" class=\"headerlink\" title=\"课时十二 服务和版本探测\"></a>课时十二 服务和版本探测</h2><p><code>服务和版本探测原理</code><br> Nmap服务和版本探测主要是通过服务指纹对比匹配，确定服务和版本信息。  nmap-service-probes数据库包含查询不同服务的探测报文和解析识别响应的匹配表达式。<br>在用某种其它类型的扫描方法发现TCP或UDP端口后，版本探测会询问这些端口，确定什么服务正在运行 通过服务指纹对比匹配，Nmap试图确定服务，应用程序名（如ISCBind，Apachehttpd）版本号，主机名，设备类型（如打印机，路由器），操作系统等</p>\n<p><code>服务和版本探测</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.-sV打开版本探测，也可以使用-A同时打开操作系统探测和服务版本探测</span><br><span class=\"line\">2.--allports全端口版本探测，Nmap版本探测默认会跳过9100TCP端口</span><br><span class=\"line\">3.-sR RPC扫描，一般很少用到</span><br><span class=\"line\">4.--version-trace获取详细版本信息</span><br><span class=\"line\">5.--version-intensity设置扫描强度，强度在0～9之间，默认为7。赋予的值越高，服务越可能被正确识别，但时间也较长</span><br><span class=\"line\">6.--version-light轻量级扫描，对应--version-intensity2的快捷方式</span><br><span class=\"line\">7.--version-all重量级扫描，对应--version-intensity9的快捷方式</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>扫描实例</code><br>1.探测目标服务器服务与版本信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -sS-sV 192.168.119.142</span><br></pre></td></tr></table></figure>\n\n<p>2.比较不同扫描强度产生的扫描结果</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -sS-sV --version-light 192.168.119.142</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十三-Github源码信息泄露\"><a href=\"#课时十三-Github源码信息泄露\" class=\"headerlink\" title=\"课时十三 Github源码信息泄露\"></a>课时十三 Github源码信息泄露</h2><p><code>产生原因</code></p>\n<p>开发者在使用Git创建、 修改、 更新远程仓库前，一旦源代码未及时处理掉一些敏感信息，例如邮件配置信息、 数据库配置信息，就会造成源码信息泄露。<br>黑客通过强大的搜索引擎，很容易抓取到GitHub代码库中的敏感信息。一般泄露的敏感信息都与账号密码有关，因此收集源码泄露的信息非常重要</p>\n<p> <code>敏感数据泄露</code><br>1.邮件配置信息\t 2.数据库配置信息<br>3.FTP配置信息\t  4.VPN配置信息<br>5 .APIKEY              ……</p>\n<p><code>信息收集的方法</code></p>\n<p>使用GoogleHacking收集GitHub源码信息泄露，例如：<br>    邮件信息收集\t\tsite:Github.com smtp@厂商域名<br>    数据库信息收集\tsite:Github.com rootpassword<br>    公司内部信息收集\tsite:Github.com ccorp.xx.com或者XX-inc.com</p>\n<p><code>实例</code></p>\n<p>1.收集目标泄露的邮箱账号信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">site:Github.com smtp@163.com</span><br></pre></td></tr></table></figure>\n\n<p>2.收集数据库配置信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">site:Github.com User ID=&#x27;sa&#x27;;Password</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十四-Zenmap\"><a href=\"#课时十四-Zenmap\" class=\"headerlink\" title=\"课时十四 Zenmap\"></a>课时十四 Zenmap</h2><p>Zenmap是nmap的GUl （图形化界面） 版本，由nmap官方提供Zenmap使用python语言编写，可以在Windows、 Linux、 Mac等不同系统上运行</p>\n<p>Zenmap主要是为Nmap提供更加简单方便的操作方式，使用图形化界面，更加容易被初学者接受。<br>注意： WindowsXP系统支持的nmap最高版本为6.47版，下载地址为：<a href=\"https://nmap.ora/dist/\">https://nmap.ora/dist/</a></p>\n<p><code>Zenmap的优点</code></p>\n<pre><code>1. 导入命令行nmap输出的扫描结果，方便可视化分析\n 2. 可以对比扫描结果，分析更加快捷\n 3. 同时支持自定义扫描方式，扫描更加高效\n 4. 可以查看拓扑和主机详细信息\n</code></pre>\n<p><code>默认扫描方式</code><br>Zenmap默认配置了种扫描方式， 下面将介绍几种常用的扫描方式，以及如何自定义扫描方式</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Intense scan    nmap -T4 -A -v</span><br><span class=\"line\">2.Intense scan plus UDP    nmap -sS -sU -T4 -A -v</span><br><span class=\"line\">3.Intense scan,all TCP ports    nmap -p 1-65535 -T4 -A -v</span><br><span class=\"line\">4.Intense scan,no ping     nmap -T4 -A -v -Pn</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>自定义扫描方式</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.配置自定义扫描方式，菜单选项：配置&gt;&gt;新的配置或命令&gt;&gt;自定义配置编辑器</span><br><span class=\"line\">2.更改默认扫描方式，菜单选项：配置&gt;&gt; 编辑选中配置&gt;&gt;自定义扫描方式</span><br><span class=\"line\">3.在配置编辑器中可自由定义扫描方式，也可保存为配置文件以便下次直接调用</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>扫描实例</code></p>\n<p> 1.使用Intensescan方式扫描目标主机</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -T4 -A -v 192.168.119.142</span><br></pre></td></tr></table></figure>\n\n<p>2.尝试自定义扫描方式扫描主机</p>\n<h2 id=\"课时十五-服务漏洞扫描\"><a href=\"#课时十五-服务漏洞扫描\" class=\"headerlink\" title=\"课时十五 服务漏洞扫描\"></a>课时十五 服务漏洞扫描</h2><p><code>扫描原理</code></p>\n<p>Nmap不仅可以进行网络扫描，还可以进行服务漏洞扫描。 Nmap内置了许多漏洞扫描脚本，由lua语言编写，通过NSE脚本引擎调用脚本检测服务漏洞<br>Linux系统安装nmap的脚本位于&#x2F;usr&#x2F;share&#x2F;nmap&#x2F;scripts&#x2F;，目录中包含了nmap内置的所有脚本，且脚本在不断更新中。 Zenmap直接在配置菜单中选择即可</p>\n<p><code>脚本分类</code><br> Nmap脚本主要分为以下几类，可通过–script&#x3D;<lua scripts>直接调用进行模糊测试</lua></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.auth：负责处理鉴权证书（绕开鉴权）的脚本</span><br><span class=\"line\">2.broadcast：在局域网内探查更多服务开启状况，如dhcp/dns/sqlserver等服务</span><br><span class=\"line\">3.brute：提供暴力破解方式，针对常见的应用如http/snmp等</span><br><span class=\"line\">4.default：使用-sC或-A选项扫描时候默认的脚本，提供基本脚本扫描能力</span><br><span class=\"line\">5.discovery：获取网络更多的信息，如SMB枚举、SNMP查询等</span><br><span class=\"line\">6.dos：用于进行拒绝服务攻击</span><br><span class=\"line\">7.exploit：利用已知的漏洞入侵系统</span><br><span class=\"line\">8.externa1：利用第三方的数据库或资源，例如进行whois解析</span><br><span class=\"line\">9.fuzzer：模糊测试的脚本，发送异常的包到目标机，探测出潜在漏洞</span><br><span class=\"line\">10.intrusive：入侵性的脚本，此类脚本可能引发对方的IDS/IPS的记录或屏蔽</span><br><span class=\"line\">11.malware：探测目标机是香感染了病毒、开启了后门等信息</span><br><span class=\"line\">12.safe：此类与intrusive相反，属于安全性脚本</span><br><span class=\"line\">13.version：负责增强服务与版本扫描（VersionDetection）功能的脚本</span><br><span class=\"line\">14.vlun：负责检查目标机是否有常见的漏洞（Vunerability），如是有MS08_067</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>脚本引擎常用命令</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.-sC  等价于--script=default</span><br><span class=\"line\">2.--script=&lt;lua scripts&gt;   调用指定的脚本</span><br><span class=\"line\">3.--script-args  为脚本提供默认参数</span><br><span class=\"line\">4.--script-trace   显示脚本执行过程中发送与接收的数据</span><br><span class=\"line\">5.--script-help=&lt;scripts&gt;   显示脚本使用帮助</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>扫描实例</code><br>1.检测自标服务器是否存在  永恒之蓝” 漏洞</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap --script smb-vuln-ms17-010 192.168.119.142</span><br></pre></td></tr></table></figure>\n\n<p>2.爆破FTP服务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nmap -p 21 192.168.119.14 2--script ftp-brute --script-args userdb=/root/user.txt,passdb=/root/passwd.txt</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十六-弱口令扫描\"><a href=\"#课时十六-弱口令扫描\" class=\"headerlink\" title=\"课时十六 弱口令扫描\"></a>课时十六 弱口令扫描</h2><p><code>hydra弱口令扫描</code><br>Hydra是是一个支持多种网络服务的认证破解工具，支持超过50个协议，包括ssh、 ftp、 smb、多个数据库等等，可以自定义字典执行快速暴力破解。</p>\n<p><code>hydra常用命令</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. -l or -L  -l指定一个用户名，-L指定用户名字典文件</span><br><span class=\"line\">2. -p or -P  -p指定一个密码，-P指定密码字典文件</span><br><span class=\"line\">3. -e nsr可选项   &quot;n&quot;尝试空密码  &quot;s&quot;尝试使用一样的用户名和密码登录， &quot;r&quot;尝试用户名和密码倒登录</span><br><span class=\"line\">4. -s  指定端口</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>扫描实例</code></p>\n<ol>\n<li><p>Windows远程桌面弱口令扫描</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hydra -L userdict.txt -P passdict.txt 192.168.119.142 rdp</span><br></pre></td></tr></table></figure>\n\n<p>rdp 代表远程桌面协议 (Remote Desktop Protocol)。RDP 通常用于远程访问Windows系统。</p>\n</li>\n<li><p>FTP弱口令扫描</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hydra -L userdict.txt -P passdict.txt -e ns ftp://192.168.119.142</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"课时十七-子域名搜集\"><a href=\"#课时十七-子域名搜集\" class=\"headerlink\" title=\"课时十七 子域名搜集\"></a>课时十七 子域名搜集</h2><p><code>子域名搜集思路</code></p>\n<ol>\n<li><p>子域名暴力破解</p>\n</li>\n<li><p>搜索引擎查询</p>\n</li>\n<li><p>查询DNS解析记录</p>\n</li>\n<li><p>爬虫爬取官方页面提取子域名</p>\n</li>\n<li><p>IP反查</p>\n</li>\n</ol>\n<p><code>在线工具</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.IP反查域名：https://dns.aizhan.com/</span><br><span class=\"line\">2.Netcraft: http://searchdns.netcraft.com/</span><br><span class=\"line\">3.站长之家：http://tool.chinaz.com/subdomain/</span><br><span class=\"line\">4.DNS数据集查询：https://dnsdumpster.com/</span><br></pre></td></tr></table></figure>\n\n<p><code>本地工具</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.Layer子域名掘机</span><br><span class=\"line\">2.subDomainsBrute</span><br><span class=\"line\">3.Fierce （Linux）</span><br><span class=\"line\">4.BurpSuite</span><br></pre></td></tr></table></figure>\n\n<p><code>子域名搜集实例</code></p>\n<ol>\n<li><p>利用子域名挖掘机搜集子域名<br>  了解子域名挖掘机搜集子域名的方式，并学会使用子域名挖掘机</p>\n</li>\n<li><p>利用在线DNS数据集收集子域名</p>\n</li>\n</ol>\n<h2 id=\"课时十八-后台发现\"><a href=\"#课时十八-后台发现\" class=\"headerlink\" title=\"课时十八 后台发现\"></a>课时十八 后台发现</h2><p><code>网站后台管理系统</code></p>\n<p>网站后台管理系统主要用于对网站前台的信息管理，如文字、 图片、影音和其他日常更新的信息等。简单来说就是对网站数据库和文件的快速操作， 以使得前台内容能够得到及时更新和调整<br>网站后台主要分为CMS内容管理系统和自主开发后台管理系统。主要区别在于CMS建站快速，但安全性不高，容易出现安全问题；自主开发后台系统可定制性强，安全性可以得到保障</p>\n<p><code>为什么要发现后台</code></p>\n<ol>\n<li>弱口令</li>\n<li>登录验证绕过</li>\n<li>后台漏洞利用</li>\n</ol>\n<p><code>后台发现方法</code></p>\n<ol>\n<li>字典枚举猜解 （御剑、 Test404等）</li>\n<li>GoogleHacking</li>\n<li>二级域名后台</li>\n<li>Web目录探测</li>\n<li>CMS特性</li>\n</ol>\n<p><code>常见的CMS及后台特征</code></p>\n<ol>\n<li>织梦CMS  后台管理界面：&#x2F;dede</li>\n<li>Joomla   后台管理界面：&#x2F;administrator</li>\n<li>Discuz  后台管理界面：&#x2F;admin.php或&#x2F;admincp.php</li>\n<li>WordPress  后台管理界面：&#x2F;wp-login.php或&#x2F;wp-admin.php</li>\n</ol>\n<h2 id=\"课时十九-Web目录结构探测\"><a href=\"#课时十九-Web目录结构探测\" class=\"headerlink\" title=\"课时十九 Web目录结构探测\"></a>课时十九 Web目录结构探测</h2><p><code>web目录结构</code></p>\n<p>Web目录结构如同文件系统一样，会按照内容或功能分为一些子目录和文件。按照网站功能将网站源文件放入不同的子目录中，由相关程序调用，大部分目录和文件普通用户无权访问<br>一些子目录中和源程序文件存放了网站相关的敏感信息，不希望被普通用户所查看，特别是网站相关配置文件和管理后台目录。，一旦网站目录中存在敏感文件，且管理员未正确配置访问权限，就可能被黑客利用攻击服务器。</p>\n<p><code>探测目录结构的作用</code></p>\n<ol>\n<li>管理后台发现</li>\n<li>敏感配置文件</li>\n<li>文件上传页面</li>\n<li>网站备份文件等</li>\n</ol>\n<p><code>目录结构探测原理</code></p>\n<ol>\n<li>基于字典暴力破解</li>\n<li>基于爬虫发现</li>\n</ol>\n<p><code>录结构探测工具</code></p>\n<ol>\n<li>DirBuster</li>\n<li>dirb</li>\n<li>BurpSuite</li>\n<li>AWVS SiteCrawler模块</li>\n</ol>\n<p><code>工具利弊</code></p>\n<ol>\n<li>DirBuster、 dirb基于字典暴力破解，结果准确、 耗时长</li>\n<li>BurpSuite、AvS基于爬虫发现，简单、 结果不明确、耗时短</li>\n<li>基于字典暴力破解目录结构，需要一个长期积累的好字典，以更缩短探测时间</li>\n</ol>\n",
            "tags": [
                "原创",
                "转载",
                "信息安全"
            ]
        },
        {
            "id": "https://w-sqrt7.gitee.io/2024/03/01/mihao-note/%E7%B1%B3%E5%A5%BD%E4%BF%A1%E5%AE%89-%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E7%BB%BC%E5%90%88/",
            "url": "https://w-sqrt7.gitee.io/2024/03/01/mihao-note/%E7%B1%B3%E5%A5%BD%E4%BF%A1%E5%AE%89-%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E7%BB%BC%E5%90%88/",
            "title": "米好信安课程笔记-系统安全综合",
            "date_published": "2024-03-01T07:23:41.173Z",
            "content_html": "<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"抱歉, 这个密码看着不太对, 请再试试.\" data-whm=\"抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"d5e040df22d76090fc329eb3a4f4c4f266cb1fbaf5eae9e16d4cb497f58df68b\">e05d9ee6e48268b2b742c6d6f1681d6164fa5aa1dc52a0c978370e90ed17c302a3c3cf3361c11a91930f07d279aace1f3ffcb9262c6d73de23b7c69224f8b8374f61407b91ea05281e86675c44a165f1d1d0fb48f2afba9f7c67c9debacdb10d813809cbadd6234c91bacd3e991e9f835d609dbd9f54084774df7f50bc6895124b540ff3b2ec4609d6a79c512a1def5afd62b48ff85fb2c84413bd768334939678d45f26b698d533f4dcb21186764e4de14a743d95efeb71d13147f75233ed876ab6af0bd1577ddb15fe50f0c84a5efb001e29eff22119f616aaf4d21b477f3c10050b0a271f91cf9eeaa3e4cdbb373d14dece70810a9476b83eb93f2152436f0a8685314288d90cedaa325ba6245620f3b0cf1462566ff97c663fca14f089c6e871dec4b95cbcc1fa19c7cf3b54ebd8eeee0b92df1e2681a2e3233fab848720efa45e2f06a23e48a6d3da8adc5b76a4849480e06174dbd6894f969089e1d514f855f0c42c414fc6e3023e0d2590b191b138f341b9100bd76d57b2c956c25834de30c7ae2cea295cf14db8eabd6041350ad6732fee96e5c3a89a15c4bfa4f89f4263b00ee71ac24d15063b1161a38f628395821198ad545a130331b60fbb8cb9feca9b035ce40af51f17ca320212a9929f9e619b69650524212570af52c25e8f346bee44735d3fa8deb47e2e9702bc9efc37aa467f7a62ce1737906783f6c8f82a8a896d9d36e3300aba21727d0d7d7960830e4394086063dfb62666b2e42e5cad92bb916d05c9faa938fc9a8613350bc4729a3714cbfea7e1cf7a6446b5c63841eb3e757295285c41c4404b383ce9c01f1beab9446582747bc75b5c0513e29aeb95dd0099a67daae1a047f9f9acbd3c</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-default\">\n      <input class=\"hbe hbe-input-field hbe-input-field-default\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-default\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-default\">您好, 这里需要密码.</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">",
            "tags": [
                "原创",
                "转载",
                "信息安全"
            ]
        },
        {
            "id": "https://w-sqrt7.gitee.io/2024/02/28/mihao-note/%E7%B1%B3%E5%A5%BD%E4%BF%A1%E5%AE%89-Linux%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/",
            "url": "https://w-sqrt7.gitee.io/2024/02/28/mihao-note/%E7%B1%B3%E5%A5%BD%E4%BF%A1%E5%AE%89-Linux%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/",
            "title": "米好信安课程笔记-Linux安全配置",
            "date_published": "2024-02-28T08:00:05.473Z",
            "content_html": "<h1 id=\"米好信息安全课程笔记\"><a href=\"#米好信息安全课程笔记\" class=\"headerlink\" title=\"米好信息安全课程笔记\"></a>米好信息安全课程笔记</h1><h1 id=\"基础课程-Linux安全配置\"><a href=\"#基础课程-Linux安全配置\" class=\"headerlink\" title=\"基础课程-Linux安全配置\"></a>基础课程-Linux安全配置</h1><h2 id=\"课时一-用户密码设置\"><a href=\"#课时一-用户密码设置\" class=\"headerlink\" title=\"课时一 用户密码设置\"></a>课时一 用户密码设置</h2><p><code>passwd命令</code></p>\n<p>普通用户只可以修改自己的密码</p>\n<p>root用户可以修改任意用户的密码</p>\n<p>passwd -l test01 锁定test01用户，该用户无法修改自己的密码</p>\n<p><code>/etc/passwd文件</code>，格式如下</p>\n<p>用户名：密码：uid：gid：用户描述：主目录：登录shell</p>\n<p><code>/etc/shadow文件</code>，格式如下</p>\n<p>登录名：加密口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：保留</p>\n<h2 id=\"课时二-用户口令强度要求\"><a href=\"#课时二-用户口令强度要求\" class=\"headerlink\" title=\"课时二 用户口令强度要求\"></a>课时二 用户口令强度要求</h2><p><code>/etc/pam.d/system-auth文件</code></p>\n<p>对用户的口令强度进行限制</p>\n<p>设置密码长度最小为10为，至少包含两种字符种类的组合</p>\n<p>编辑&#x2F;etc&#x2F;pam.d&#x2F;system-auth文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">password requisite pam_cracklib.so try_first_pass retry=3</span><br></pre></td></tr></table></figure>\n\n<p>替换为</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">password requisite pam_cracklib.so try_first_pass retry=3 minlen=10 minclass=2</span><br></pre></td></tr></table></figure>\n\n<p>其中try_first_pass retry&#x3D;3是密码重试次数为3次，如果在初始尝试中失败，则应该重试3次，minlen&#x3D;10是密码最小长度为10,minclass&#x3D;2是密码最少要有两种字符种类组合</p>\n<p>pam＿cracklib主要参数说明：</p>\n<p>retry&#x3D;N:</p>\n<p>重试多少次后返回密码修改错误difok&#x3D;N:</p>\n<p>新密码必需与旧密码不同的位数dcredit&#x3D;N:</p>\n<p>N＞＝0：密码中最多有多少个数字；</p>\n<p>N＜0密码中最少有多少个数字．Icredit&#x3D;N:</p>\n<p>小写字母的个数 ucredit&#x3D;N:</p>\n<p>大写字母的个数 credit&#x3D;N:</p>\n<p>特殊字母的个数</p>\n<p>minclass＝N： 密码组成（大／小写字母，数字，特殊字符）</p>\n<p><code>/etc.login.defs文件</code></p>\n<p>如设置用户的密码有效期为90天，斌再密码到期前30天在用户登录时提醒用户</p>\n<p>pass_max_days 90:密码最大有效期，单位为天，设置成99999代表永久有效</p>\n<p>pass_warn_age 15:密码失效前多少天在用户登录时通知用户修改口令</p>\n<p>pass_min_days 0 :多少天后可修改密码，0代表可立即修改，非0代表N天后可修改</p>\n<p>pass_min_len 5</p>\n<p>密码最小长度若system-auth文件已经指定，则此处无效</p>\n<h2 id=\"课时三-用户锁定策略\"><a href=\"#课时三-用户锁定策略\" class=\"headerlink\" title=\"课时三 用户锁定策略\"></a>课时三 用户锁定策略</h2><p><code>/etc/pam.d/login文件</code></p>\n<p>如设置普通用户连续错误登录的最大次数，超过5次，则锁定该用户，锁定之后，15分钟后自动解锁</p>\n<p>编辑&#x2F;etc&#x2F;pam.d&#x2F;login文件，在第一行下即#%PAM-1.0的下面添加</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auth  required  pam_tally.so  deny=5  unlock_time=900</span><br></pre></td></tr></table></figure>\n\n<p>even_deny_root  #限制root用户</p>\n<p>dengy  #设置普通用户和root用户登录连续错误的最大次数</p>\n<p>unlock_time  #设定普通用户锁定后，多少时间后解锁，单位秒</p>\n<p>root_unlock_time  #设置root用户锁定后</p>\n<p><code>手动锁定和解锁用户</code></p>\n<p>查看用户andrew的错误登录次数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pam_tally --user andrew</span><br></pre></td></tr></table></figure>\n\n<p>查看用户andrew的错误登录次数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pam_tally --user andrew --reset</span><br></pre></td></tr></table></figure>\n\n<p>使用passwd命令锁定与解锁账号</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">passwd -l andrew #锁定用户andrew</span><br><span class=\"line\">passwd -S andrew #查看用户andrew锁定状态</span><br><span class=\"line\">passwd -u andrew #解锁用户andrew</span><br></pre></td></tr></table></figure>\n\n<p>使用usermod命令锁定与解锁账号</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">usermod -L andrew #锁定用户andrew</span><br><span class=\"line\">usermod -U andrew #解锁用户andrew</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时四-root账户远程登录限制\"><a href=\"#课时四-root账户远程登录限制\" class=\"headerlink\" title=\"课时四 root账户远程登录限制\"></a>课时四 root账户远程登录限制</h2><p><code>/etc/securetty文件</code></p>\n<p>tty一般指终端，即直接和Linux相互通信的一个终端，telnet远程登录使用的是tty</p>\n<p>pts是指伪终端，在窗口型Linux里面打卡的terminal都是pts，ssh远程登陆使用的是pts</p>\n<p>console指当前控制台</p>\n<p>vc是virtual console，为虚拟的监视器</p>\n<p>vt是virtual terminal，为虚拟终端</p>\n<p>在该文件中没有找到当前字符终端设备，login会认为他不安全，给出login incorrect 错误</p>\n<p>若没有该文件，root用户可以从任何一台字符终端设备上登录从而中造成安全问题</p>\n<p>&#x2F;etc&#x2F;securetty文件的权限应是600，400 ， 为限制root用户远程登录，应将&#x2F;etc&#x2F;securetty文件的内容只保留console</p>\n<h2 id=\"课时五-检查是否存在除root之外的UID为0的帐户\"><a href=\"#课时五-检查是否存在除root之外的UID为0的帐户\" class=\"headerlink\" title=\"课时五 检查是否存在除root之外的UID为0的帐户\"></a>课时五 检查是否存在除root之外的UID为0的帐户</h2><p>id和用户名的对应关系存放在&#x2F;etc&#x2F;passwd文件中</p>\n<p>用户可通过id命令来获取查看自己的uid号</p>\n<p>root用户的uid为0</p>\n<p>通过检查&#x2F;etc&#x2F;passwd文件来检查UID为0的账户</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F:&#x27;($3==0)&#123;print $1&#125;&#x27;/etc/passwd</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li><code>-F:</code>：这个选项设置了字段分隔符为冒号（<code>:</code>）。在 <code>/etc/passwd</code> 文件中，用户的账号信息是由冒号分隔的字段组成的。</li>\n<li><code>($3==0)</code>：这是一个条件表达式，它检查第三个字段（由冒号分隔）是否等于 <code>0</code>。在 <code>/etc/passwd</code> 文件中，第三个字段通常表示用户的 UID（用户 ID）。UID 为 <code>0</code> 的用户通常是超级用户（root）。</li>\n<li><code>&#123;print $1&#125;</code>：如果上述条件（第三个字段等于 <code>0</code>）为真，则执行这个动作，即打印第一个字段。在 <code>/etc/passwd</code> 文件中，第一个字段是用户名。</li>\n<li><code>/etc/passwd</code>：这是 <code>awk</code> 命令要处理的文件名。</li>\n</ol>\n<p><code>awk</code> 是一个强大的文本处理工具，常用于在 Linux 和 Unix 系统中进行模式扫描和文本&#x2F;数据提取。</p>\n<p>awk 的基本语法如下：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk <span class=\"string\">&#x27;pattern &#123; action &#125;&#x27;</span> file</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>pattern</code>：一个模式，用于匹配输入文本中的行。</li>\n<li><code>action</code>：当模式匹配成功时要执行的动作。</li>\n<li><code>file</code>：要处理的文件名。</li>\n</ul>\n<p>awk默认使用空格或制表符作为字段分隔符，但可以通过 <code>-F</code> 选项指定其他分隔符。字段可以通过 <code>$n</code> 访问，其中 n 是字段的编号（从 1 开始）。</p>\n<p>以下是一些 awk 命令的示例：</p>\n<ol>\n<li>打印文件的所有内容<br>awk ‘{ print }’ file.txt</li>\n<li>打印文件的第一列<br>awk ‘{ print $1 }’ file.txt</li>\n<li>打印文件的第二列和第三列<br>awk ‘{ print $2, $3 }’ file.txt</li>\n<li>打印文件的总行数<br>awk ‘END { print NR }’ file.txt</li>\n<li>使用自定义分隔符<br>awk -F: ‘{ print $1, $3 }’ &#x2F;etc&#x2F;passwd<br>这里 -F: 指定了冒号作为字段分隔符</li>\n</ol>\n<h2 id=\"课时六-root用户环境变量的安全性\"><a href=\"#课时六-root用户环境变量的安全性\" class=\"headerlink\" title=\"课时六 root用户环境变量的安全性\"></a>课时六 root用户环境变量的安全性</h2><p><code>/etc.profile文件</code></p>\n<p>当系统启动或用户登录时，该文件中的命令和脚本会被执行。&#x2F;etc&#x2F;profile 主要用于设置系统级的环境变量和启动脚本，这些设置会影响所有用户。</p>\n<p><code>~/.bash_profile文件</code></p>\n<p>~&#x2F;.bash_profile 文件是一个用户级别的 Bash Shell 配置文件，位于用户的主目录下（通常是 ~ 或 &#x2F;home&#x2F;username）。当用户登录时，该文件会被自动执行一次，用于配置用户的 shell 环境。该文件只对当前用户有效</p>\n<p><code>root用户环境变量的安全性</code></p>\n<p>$PATH环境变量内存着一张目录列表，当用户要执行某一程序时，系统就会按照列表中的内容去查找该程序的位置，如果恶意程序存放在$PATH变量所在的路径下，则很容易被执行。</p>\n<p>检查是否包含父目录，检查 $PATH 环境变量中是否包含某些特定的路径段，特别是以点（.）或冒号（:）开始的路径段，或者以点或冒号结束的路径段。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo $PATH | egrep &#x27;(^|:)(\\.|:|$)&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>(^|:)(.|:|$): 这是 egrep 命令使用的正则表达式模式。</p>\n<p>^|: 匹配字符串的开始或冒号字符。这确保了我们在每个路径段的开始处查找。<br>.|:|$ 匹配点字符、冒号字符或字符串的结束。这确保了我们在每个路径段的结束处查找。</p>\n<p>检查是否包含组目录权限为777的目录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find `echo $PATH | tr &#x27;&#x27;:&#x27; &#x27;` -type d \\(-perm -002 -o -perm -020\\) -ls</span><br></pre></td></tr></table></figure>\n\n<p>1.echo $PATH: 如前所述，这会显示当前用户的 PATH 环境变量的值。</p>\n<p>2.tr ‘’:’\\n’: 这里的 tr 命令用于替换或删除字符。这里，它把 PATH 值中的冒号（:）替换为换行符（\\n）。这样做的目的是把 PATH 中的每个目录路径放到单独的一行，因为 find 命令通常期望路径列表是一行一个。</p>\n<p>3.find … -ls: 这是一个反引号（backticks）包裹的命令替换，它会执行其中的命令，并将输出（即每个目录路径）作为 find 命令的参数。</p>\n<p>4.find … -type d: find 命令用于在目录树中查找文件，并可以根据各种条件进行过滤。-type d 参数指定只查找目录。</p>\n<p>5.\\(-perm -002 -o -perm -020\\): 这是一个复合权限条件，用于匹配具有特定权限设置的目录。</p>\n<p>-perm -002 匹配所有其他用户有写权限的目录（即权限位中的第2位是1）。<br>-perm -020 匹配所有组有写权限的目录（即权限位中的第5位是1）。<br>-o 是逻辑“或”操作符，用于组合上述两个条件。因此，这个复合条件会匹配所有其他用户或组有写权限的目录。</p>\n<h2 id=\"课时七-远程连接的安全性配置\"><a href=\"#课时七-远程连接的安全性配置\" class=\"headerlink\" title=\"课时七 远程连接的安全性配置\"></a>课时七 远程连接的安全性配置</h2><p><code>.netrc文件</code></p>\n<p>.netrc文件中包含了登录和初始化的信息，常被用来自动化登录，一般存放在用户的主目录下，也需要用户对此文件具有可访问的权限</p>\n<p>创建.netrc文件，设置自动登录ftp脚本，内容示例如下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">default login andrew password 123456</span><br></pre></td></tr></table></figure>\n\n<p>当用户执行ftp 192168.18.100登录ftp服务器时，无需再输入密码</p>\n<p><code>.rhosts文件</code></p>\n<p>.rhosts 文件包含主机—用户组合列表，可以授予指定用户从指定主机登录而不必提供口令的权限</p>\n<p>1.修改／etc／xinetd.d／rsh｜rlogin｜rexec文件，将disable＝yes 改 为 disable＝no</p>\n<p>2.在.rhosts文件中加入远程登录的主机的计算机名，如Shiny</p>\n<p>3.在Shiny这台主机上使用rsh 192.168.18.130 进行远程登录，登录过程中发现无需密码</p>\n<p><code>安全配置策略</code></p>\n<p>查找.netrc和.rhosts文件，并删除这些文件</p>\n<p>find&#x2F;-name .netrc</p>\n<p>find &#x2F;-name .rhosts </p>\n<h2 id=\"课时八-用户的umask安全配置\"><a href=\"#课时八-用户的umask安全配置\" class=\"headerlink\" title=\"课时八 用户的umask安全配置\"></a>课时八 用户的umask安全配置</h2><p><code>umask</code></p>\n<p>​      umask用来设置限制新文件权限的掩码。 当新文件被创建时，其最初的权限由文件创建掩码决定。 用户每次注册进入系统时，umask命令都被执行，并自动设置掩码改变默认值，新的权限将会把旧的覆盖</p>\n<p>   umask命令是在&#x2F;etc&#x2F;profile等文件中设置的， 登录时引用这个文件，改变所有用户的umask<br>    如果希望永久性地设置自己的umask值，那么就把它放在自己$HOME<br>目录下的.profile或.bash_profile或.bashrc等文件中</p>\n<p>常见umask值与权限对应关系，建议设置用户的默认umask值为077</p>\n<table>\n<thead>\n<tr>\n<th>umask值</th>\n<th>文件</th>\n<th>目录</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>002</td>\n<td>664</td>\n<td>775</td>\n</tr>\n<tr>\n<td>022</td>\n<td>644</td>\n<td>755</td>\n</tr>\n</tbody></table>\n<p>​                                                                     </p>\n<p><code>检查umask值</code><br>检查含有umask设置的文件；</p>\n<p>more &#x2F;etc&#x2F;profile<br>more &#x2F;etc&#x2F;bashrc<br>more &#x2F;etc&#x2F;csh.login<br>more &#x2F;etc&#x2F;csh.cshrc<br>more $HOME&#x2F;.profile<br>more $HOME&#x2F;.bashrc<br>more $HOME&#x2F;.bash_profile</p>\n<h2 id=\"课时九-重要目录和文件的权限设置\"><a href=\"#课时九-重要目录和文件的权限设置\" class=\"headerlink\" title=\"课时九 重要目录和文件的权限设置\"></a>课时九 重要目录和文件的权限设置</h2><p>Linux系统中的重要目录列表</p>\n<p><code>/etc/     </code>            系统管理和配置文件</p>\n<p><code>/etc/rc.d/init.d/  </code>   系统启动自动运行的脚本</p>\n<p><code>/tmp</code>          公共的临时文件存储点</p>\n<p><code>/etc/inetd.conf </code>    &#x2F;usr&#x2F;sbin&#x2F;inetd的初始化文件，需要监听的inet服务及有关信息</p>\n<p><code>/etc/passwd</code>    用户数据库</p>\n<p><code>/etc/shadow  </code>  影子口令文件</p>\n<p><code>/etc/group </code>      组的信息。</p>\n<p><code>/etc/security</code>    对每个pam模块的具体的配置</p>\n<p><code>/etc/services </code>   网络服务名和它们对应使用的端口号及协议</p>\n<p><code>/etc/rc*.d </code>      启动的配置文件和脚本</p>\n<h2 id=\"课时十-查找未授权的SUID-SGID文件\"><a href=\"#课时十-查找未授权的SUID-SGID文件\" class=\"headerlink\" title=\"课时十 查找未授权的SUID SGID文件\"></a>课时十 查找未授权的SUID SGID文件</h2><p>SUID：当s权限在所有者的x时，类似-r-s–x–x<br>SGID：当s权限在用户组的x时，类似-r-x–s–x<br>S是一种特殊权限，设置了suid的程序文件，在用户执行该程序时，用户的权限是该程序文件属主的权限<br>sgid与suid类似，只是执行程序时获得的是文件属组的权限。</p>\n<p>​\tSUID（Set User ID）和SGID（Set Group ID）是Unix和Linux操作系统中的两种特殊权限，它们分别影响执行文件和目录的行为。</p>\n<p><code>SUID权限：</code><br>当文件具有SUID权限时，执行该文件的用户将暂时获得文件所有者的权限。这意味着，即使执行文件的用户不是文件的所有者，他们也可以以文件所有者的身份执行该文件。SUID权限仅对可执行文件有效。例如，&#x2F;bin&#x2F;su 和 &#x2F;usr&#x2F;bin&#x2F;passwd 这两个命令的所有者的x权限上都使用了SUID权限。</p>\n<p><code>SGID权限：</code><br>当文件或目录具有SGID权限时，执行文件或在其中创建新文件的用户将暂时获得文件或目录所属组的权限。对于文件，SGID的作用与SUID类似，即执行文件时以文件所属组的身份执行。对于目录，SGID权限确保在该目录中创建的新文件将继承该目录的所属组，而不是创建者的主组。</p>\n<p>可用下面的命令查找系统中所有的SUID和SGID程序：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for PART in `grep -v ^# /etc/fstab | awk &#x27;($6!=&quot;0&quot;&#123;print $2&#125;)&#x27;`;do find $PART -xdev \\(-perm -04000 -o -perm -02000\\) -type f -print done</span><br></pre></td></tr></table></figure>\n\n<p>让我们逐步分析这个命令：</p>\n<p>1.<code>grep -v ^# /etc/fstab:</code></p>\n<p>grep -v ^#: 这个命令会从 &#x2F;etc&#x2F;fstab 文件中过滤掉所有以 # 开头的行（即注释行）。<br>&#x2F;etc&#x2F;fstab: 是一个系统文件，它包含了关于磁盘分区、交换空间和其他文件系统的挂载信息。</p>\n<p>2.<code>awk &#39;($6!=&quot;0&quot;&#123;print $2&#125;)&#39;:</code></p>\n<p>awk: 是一个文本处理工具，用于模式扫描和文本&#x2F;数据提取。<br>($6!&#x3D;”0”{print $2}): 这是一个 awk 脚本，它会检查每一行的第六个字段（在 &#x2F;etc&#x2F;fstab 中通常是文件系统检查的顺序）是否不等于 “0”。如果不等于 “0”，则打印该行的第二个字段（通常是挂载点的路径）。</p>\n<p>3.<code>for PART in ...; do ... done:</code></p>\n<p>这是一个 shell 循环，它会遍历 awk 命令输出的每一个挂载点路径，并将每个路径存储在变量 PART 中。</p>\n<p>4.<code>find $PART -xdev \\(-perm -04000 -o -perm -02000\\) -type f -print:</code></p>\n<p>find: 是一个命令，用于在目录树中查找文件。<br>$PART: 是循环中当前迭代的挂载点路径。<br>-xdev: 这个选项确保 find 命令只在同一个文件系统上搜索，不会跨越设备边界。<br>\\(-perm -04000 -o -perm -02000\\): 这是一个复合条件，用于匹配具有 SUID (-perm -04000) 或 SGID (-perm -02000) 权限的文件。<br>-perm: 在find命令中，-perm选项用于检查文件的权限模式，以确定哪些文件与指定的权限模式匹配。这个选项通常与八进制或符号表示法一起使用，以指定要搜索的权限。<br>-type f: 这个选项限制 find 命令只搜索普通文件。<br>-print: 这个动作会打印出匹配的文件路径。</p>\n<h2 id=\"课时十一-检查任何人都有写权限的目录\"><a href=\"#课时十一-检查任何人都有写权限的目录\" class=\"headerlink\" title=\"课时十一 检查任何人都有写权限的目录\"></a>课时十一 检查任何人都有写权限的目录</h2><p>用下面的命令查找任何人都有写权限的目录：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for PART in `awk&#x27;($3==&quot;ext2&quot;||$3==&quot;ext3&quot;)&#123;print $2&#125;&#x27; /etc/fstab`;do find $PART -xdev -type d \\(-perm -0002 -a ! -perm -1000\\) -print done</span><br></pre></td></tr></table></figure>\n\n<p>这段命令是一个组合的命令，用于在Linux系统中查找特定文件系统的特定目录权限设置。让我们逐步分析这个命令：</p>\n<ol>\n<li><strong>awk</strong> 命令：</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk <span class=\"string\">&#x27;($3==&quot;ext2&quot;||$3==&quot;ext3&quot;)&#123;print $2&#125;&#x27;</span> /etc/fstab</span><br><span class=\"line\">* `awk` 是一个强大的文本处理工具，常用于格式化文本数据。  </span><br><span class=\"line\">* 这个命令在 `/etc/fstab` 文件中搜索，这个文件通常包含文件系统的挂载信息。  </span><br><span class=\"line\">* `(<span class=\"variable\">$3</span>==<span class=\"string\">&quot;ext2&quot;</span>||<span class=\"variable\">$3</span>==<span class=\"string\">&quot;ext3&quot;</span>)`：这是一个条件，检查第三列（在 `awk` 中列从1开始计数）是否等于 <span class=\"string\">&quot;ext2&quot;</span> 或 <span class=\"string\">&quot;ext3&quot;</span>。在 `/etc/fstab` 中，第三列通常表示文件系统的类型。  </span><br><span class=\"line\">* `&#123;<span class=\"built_in\">print</span> <span class=\"variable\">$2</span>&#125;`：如果上述条件为真，则打印第二列的内容，即文件系统的挂载点或挂载路径。</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><strong>for</strong> 循环：</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> PART <span class=\"keyword\">in</span> `...awk命令...`; <span class=\"keyword\">do</span> ... <span class=\"keyword\">done</span></span><br><span class=\"line\">* 这是一个bash shell循环，它会遍历 `awk` 命令的输出结果（即所有满足条件的挂载点）。  </span><br><span class=\"line\">* 对于每一个 `PART`（挂载点），它都会执行 `<span class=\"keyword\">do</span>` 和 `<span class=\"keyword\">done</span>` 之间的命令。</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><strong>find</strong> 命令：</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find <span class=\"variable\">$PART</span> -xdev -<span class=\"built_in\">type</span> d \\(-perm -0002 -a ! -perm -1000\\) -<span class=\"built_in\">print</span></span><br><span class=\"line\">* `find` 命令用于在文件系统中搜索文件。  </span><br><span class=\"line\">* `<span class=\"variable\">$PART</span>`：这是循环中的变量，代表每一个挂载点。  </span><br><span class=\"line\">* `-xdev`：这个选项告诉 `find` 命令只在同一个设备（或文件系统）中搜索，不跨越其他设备。  </span><br><span class=\"line\">* `-<span class=\"built_in\">type</span> d`：只搜索目录。  </span><br><span class=\"line\">* `(-perm -0002 -a ! -perm -1000)`：这是一个复杂的权限检查。  </span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">\t+ `-perm -0002`：搜索所有设置了“其他用户有写权限”的目录。  </span><br><span class=\"line\">\t+ `-a`：逻辑AND，确保两个条件都为真。  </span><br><span class=\"line\">\t+ `! -perm -1000`：排除所有设置了“用户有执行权限且其他用户和组没有任何权限”的目录。这通常用于排除设置了SGID位（<span class=\"built_in\">set</span> group ID）的目录。  </span><br><span class=\"line\">* `-<span class=\"built_in\">print</span>`：对于每一个满足条件的目录，打印其路径。</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十二-查找任何人都有写权限的文件\"><a href=\"#课时十二-查找任何人都有写权限的文件\" class=\"headerlink\" title=\"课时十二 查找任何人都有写权限的文件\"></a>课时十二 查找任何人都有写权限的文件</h2><p>用下面的命令查找任何人都有写权限的文件：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for PART in `grep -v ^# /etc/fstab | awk &#x27;($6!=&quot;0&quot;)&#123;print $2&#125;&#x27;`;do find $PART -xdev -type f \\(-perm -0002 -a ! -perm -1000\\) -print done</span><br></pre></td></tr></table></figure>\n\n<p>这个命令组合的目的是在系统中查找所有在 <code>/etc/fstab</code> 中定义的非注释且 <code>fs_passno</code> 不为 <code>0</code> 的挂载点，并在这些挂载点中搜索所有设置了“其他用户有写权限”但没有设置SGID位的文件，并打印这些文件的路径。这通常用于安全审计，以确保没有敏感文件被设置为可以被任何用户写入。</p>\n<p>1.<strong>grep</strong> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -v ^<span class=\"comment\"># /etc/fstab</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>grep</code> 是一个文本搜索工具，用于搜索文件中的文本模式。</li>\n<li><code>-v</code> 选项告诉 <code>grep</code> 排除（或反转）匹配的行。</li>\n<li><code>^#</code> 是一个正则表达式，匹配以 <code>#</code> 符号开头的行。在 <code>/etc/fstab</code> 文件中，<code>#</code> 通常用于注释行。因此，<code>grep -v ^# /etc/fstab</code> 会输出所有非注释行的内容。</li>\n</ul>\n<p>2.<strong>awk</strong> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk <span class=\"string\">&#x27;($6!=&quot;0&quot;)&#123;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这个 <code>awk</code> 命令检查第六列（字段）是否不等于 <code>&quot;0&quot;</code>。在 <code>/etc/fstab</code> 文件中，第六列通常表示文件系统检查的顺序（<code>fs_passno</code>），其中 <code>0</code> 表示不检查。</li>\n<li>如果第六列不等于 <code>&quot;0&quot;</code>，则打印第二列（即文件系统挂载点）</li>\n</ul>\n<p>3.<strong>for</strong> 循环：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> PART <span class=\"keyword\">in</span> `...grep和awk命令...`; <span class=\"keyword\">do</span> ... <span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这是一个 <code>for</code> 循环，它会遍历 <code>grep</code> 和 <code>awk</code> 命令的输出结果（即所有非注释且 <code>fs_passno</code> 不为 <code>0</code> 的挂载点）。</li>\n<li>对于每一个 <code>PART</code>（挂载点），它都会执行 <code>do</code> 和 <code>done</code> 之间的命令。</li>\n</ul>\n<p>4.<strong>find</strong> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find <span class=\"variable\">$PART</span> -xdev -<span class=\"built_in\">type</span> f \\(-perm -0002 -a ! -perm -1000\\) -<span class=\"built_in\">print</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>find</code> 命令用于在文件系统中搜索文件。</li>\n<li><code>-type f</code>：这次搜索的是文件（而不是目录）。</li>\n<li>权限检查 <code>(-perm -0002 -a ! -perm -1000)</code> 与之前的命令相同：搜索所有设置了“其他用户有写权限”的文件，并排除设置了SGID位（<code>set group ID</code>）的文件。</li>\n<li><code>-print</code>：对于每一个满足条件的文件，打印其路径。</li>\n</ul>\n<h2 id=\"课时十三-检查没有属主的文件\"><a href=\"#课时十三-检查没有属主的文件\" class=\"headerlink\" title=\"课时十三 检查没有属主的文件\"></a>课时十三 检查没有属主的文件</h2><p>发现没有属主的文件往往就意味着有黑客入侵你的系统了。不能允许没有主人的文件存在。如果在系统中发现了没有主人的文件或目录，先查看它的完整性，如果一切正常，给它一个主人。有时候卸载程序可能会出现一些没有主人的文件或目录，在这种情况下可以把这些文件和目录删除掉。</p>\n<p>用下面的命令查找没有属主的文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for PART in `grep -v ^# /etc/fstab | awk &#x27;($6!=&quot;0&quot;)&#123;print $2&#125;&#x27;`;do find $PART -nouser -o -nogroup -print done</span><br></pre></td></tr></table></figure>\n\n<p>这个命令组合使用了 <code>grep</code>、<code>awk</code> 和 <code>find</code> 命令来搜索文件系统中可能存在的没有关联用户或组的文件。我们来逐步分析这个命令：</p>\n<p>1.<strong>grep</strong> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -v ^<span class=\"comment\"># /etc/fstab</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如同之前，<code>grep -v ^# /etc/fstab</code> 用来过滤掉 <code>/etc/fstab</code> 文件中的注释行。</li>\n</ul>\n<p>2.<strong>awk</strong> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk <span class=\"string\">&#x27;($6!=&quot;0&quot;)&#123;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这个 <code>awk</code> 命令依然检查 <code>/etc/fstab</code> 文件的第六列（<code>fs_passno</code>），确保它不等于 <code>&quot;0&quot;</code>。</li>\n<li>如果第六列不等于 <code>&quot;0&quot;</code>，则打印第二列（文件系统挂载点）。</li>\n</ul>\n<p>3.<strong>for</strong> 循环：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> PART <span class=\"keyword\">in</span> `...grep和awk命令...`; <span class=\"keyword\">do</span> ... <span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这是一个 <code>for</code> 循环，它会遍历所有由 <code>grep</code> 和 <code>awk</code> 命令输出的非注释且 <code>fs_passno</code> 不为 <code>0</code> 的挂载点。</li>\n</ul>\n<p>4.<strong>find</strong> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find <span class=\"variable\">$PART</span> -nouser -o -nogroup -<span class=\"built_in\">print</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>find</code> 命令在指定的挂载点 <code>$PART</code> 中搜索文件。</li>\n<li><code>-nouser</code>：搜索没有关联用户的文件。这些文件通常是因为文件的所有者被删除，但文件依然存在。</li>\n<li><code>-o</code>：逻辑 OR，表示接下来的条件也是搜索的一部分。</li>\n<li><code>-nogroup</code>：搜索没有关联组的文件。这些文件通常是因为文件的组被删除，但文件依然存在。</li>\n<li><code>-print</code>：打印满足条件的文件的路径。</li>\n</ul>\n<h2 id=\"课时十四-检查异常隐含文件\"><a href=\"#课时十四-检查异常隐含文件\" class=\"headerlink\" title=\"课时十四 检查异常隐含文件\"></a>课时十四 检查异常隐含文件</h2><p>异常隐藏文件可能是隐藏的黑客工具或者其它一些信息（口令破解程序、其它系统的口令文件，等等）。常用的技术就是用一些特殊的名，如：“…”、“..”或“..＾G”，来隐含文件或目录。</p>\n<p>用下面的命令检查异常隐含文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find / -xdev -name <span class=\"string\">&quot;..*&quot;</span> -<span class=\"built_in\">print</span></span><br><span class=\"line\">find / -xdev -name <span class=\"string\">&quot;...*&quot;</span> -<span class=\"built_in\">print</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>/</code>：从文件系统的根目录开始搜索。</li>\n<li><code>-xdev</code>：限制搜索到同一文件系统内，不会跨越到其他设备或挂载点。</li>\n<li><code>-name &quot;..*&quot;</code>：搜索文件名以 <code>..</code> 开头的文件。在UNIX和Linux文件系统中，<code>..</code> 通常表示上一级目录，但这里它被用作文件名的一部分。因此，这个命令将匹配所有以 <code>..</code> 开头的文件名。</li>\n<li><code>-print</code>：打印找到的文件路径。</li>\n</ul>\n<h2 id=\"课时十五-登录超时设置\"><a href=\"#课时十五-登录超时设置\" class=\"headerlink\" title=\"课时十五 登录超时设置\"></a>课时十五 登录超时设置</h2><p>设置登录超时时间为5分钟：</p>\n<p>编辑／etc／profile文件，添加以下内容（单位为秒）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export TMOUT=300</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时十六-syslog登录事件记录\"><a href=\"#课时十六-syslog登录事件记录\" class=\"headerlink\" title=\"课时十六 syslog登录事件记录\"></a>课时十六 syslog登录事件记录</h2><p><code>/etc/syslog.conf文件</code></p>\n<p>syslog采用可配置的、统一的系统登记程序，随时从系统各处接受log请求，然后根据／etc／syslog.conf中的预先设定把log信息写入相应文件中、邮寄给特定用户或者直接以消息的方式发往控制台。</p>\n<p>syslog.conf文件是一个传统的 Unix&#x2F;Linux 系统日志配置文件，用于定义哪些类型的消息应该被记录到哪些日志文件，以及如何将消息发送到其他机器上的 syslog 服务。</p>\n<p>syslog.conf的格式：</p>\n<p>一项配置记录：“选项”（selector）和“动作”（action），Tab制表符进行分隔（空格间隔无效）。</p>\n<p>“选项”又由一个或多个形如“类型.级别”格式的保留字段组合而成，各保留字段间用分号分隔。</p>\n<p>例：mail.* &#x2F;var&#x2F;log&#x2F;mail.log </p>\n<p><strong>级别：</strong><br>emerg     紧急，通常应广播到所有用户；<br>alert      告警，当前状态必须立即进行纠正；<br>crit        关键状态的警告。例如，硬件故障；<br>err        其它错误；<br>Warn      警告；</p>\n<p><strong>级别：代表信息的重要性</strong><br>notice     注意；非错误状态的报告，但应特别处理；<br>info       通报信息；<br>debug      调试程序时的信息；<br>none       通常调试程序时用，指示带有none级别的类型产生的信息无需送出</p>\n<p><strong>动作：</strong><br>&#x2F;filename   日志文件。 由绝对路径指出的文件名，此文件必须事先建立<br>@host     远程主机；@符号后面可以是IP也可以是域名；<br>useruser2指定用户。女如果指定用户已登录，那么他们将收到信息；所有用户，所有已登录的用户都将收到信息</p>\n<p><code>syslog.conf登录事件记录</code></p>\n<p>利用syslog登录事件记录</p>\n<p>查看&#x2F;etc&#x2F;syslog.conf文件，是否包含authpriv，存在authpriv即启用了事件记录，并且后面就是日志文件的位置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">more /etc/syslog.conf</span><br></pre></td></tr></table></figure>\n\n\n\n<ol>\n<li><p><strong>确定日志文件的位置</strong>：</p>\n<ul>\n<li>对于传统的<code>syslog</code>，登录事件通常记录在<code>/var/log/secure</code>或<code>/var/log/auth.log</code>中。</li>\n<li>对于<code>rsyslog</code>，你可能需要查看<code>/var/log/syslog</code>或<code>/var/log/auth.log</code>，具体取决于你的配置。</li>\n<li>对于<code>syslog-ng</code>，日志文件的位置可能会有所不同，取决于你的配置。</li>\n</ul>\n</li>\n<li><p><strong>查看日志文件</strong>：<br>你可以使用<code>cat</code>、<code>tail</code>、<code>less</code>或<code>grep</code>等命令来查看和搜索日志文件。例如，要查看<code>/var/log/secure</code>文件中的登录事件，你可以使用：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">cat</span> /var/log/secure</span><br></pre></td></tr></table></figure>\n\n<p>或者，如果你只想查看最近的登录事件，可以使用：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">tail</span> -f /var/log/secure</span><br></pre></td></tr></table></figure>\n\n<p>要搜索特定的登录事件，例如用户”john”的登录尝试，可以使用：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo grep <span class=\"string\">&quot;john&quot;</span> /var/log/secure</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>检查syslog配置文件</strong>：<br>要确定哪些登录事件被记录到syslog，你需要查看syslog的配置文件。对于<code>rsyslog</code>，这通常是<code>/etc/rsyslog.conf</code>或<code>/etc/rsyslog.d/</code>目录下的文件。对于<code>syslog-ng</code>，配置文件通常是<code>/etc/syslog-ng/syslog-ng.conf</code>。</p>\n<p>在配置文件中，你可能会找到类似于以下的行，这些行定义了哪些消息应该被记录到哪个文件或远程主机：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auth,authpriv.*                 /var/log/secure</span><br></pre></td></tr></table></figure>\n\n<p>这表示所有与认证相关的消息（<code>auth</code>和<code>authpriv</code>设施）都被记录到<code>/var/log/secure</code>文件中。</p>\n</li>\n<li><p><strong>重启syslog服务</strong>：<br>如果你对配置文件进行了更改，记得重启syslog服务以应用更改。对于<code>rsyslog</code>，可以使用以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart rsyslog</span><br></pre></td></tr></table></figure>\n\n<p>对于<code>syslog-ng</code>，使用：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl restart syslog-ng</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>使用日志分析工具</strong>：<br>对于大量的日志数据，手动搜索可能不太高效。你可以考虑使用日志分析工具，如<code>logwatch</code>、<code>multitail</code>、<code>journalctl</code>（对于使用systemd的系统）等，来帮助你更有效地分析和查看日志。</p>\n</li>\n</ol>\n<p>syslog 登录事件记录主要用于以下几个目的：</p>\n<ol>\n<li><strong>安全审计</strong>：syslog 可以记录所有与登录相关的事件，包括成功的登录尝试、失败的登录尝试、账户锁定等。这些记录可以用于分析系统中是否存在未经授权的访问尝试或其他安全事件。</li>\n<li><strong>故障排查</strong>：当系统出现问题或用户报告无法登录时，syslog 登录事件记录可以帮助管理员快速定位问题。例如，如果多个用户报告无法登录，管理员可以查看syslog记录来查找是否有任何相关的错误或警告消息。</li>\n<li><strong>合规性和监管</strong>：在某些行业或地区，法规可能要求保留特定的日志记录以满足合规性要求。syslog 登录事件记录可以作为这些合规性审计的一部分。</li>\n<li><strong>系统监控</strong>：通过实时监控syslog登录事件记录，管理员可以及时发现任何可疑的活动或异常行为，从而采取适当的措施来应对潜在的安全威胁。</li>\n<li><strong>用户行为分析</strong>：通过分析syslog登录事件记录，管理员可以了解用户的行为模式，例如登录时间、登录频率、登录来源等。这有助于识别异常的用户行为或潜在的安全风险。</li>\n</ol>\n<p>总之，syslog 登录事件记录是系统安全和管理的重要工具，它提供了关于用户登录活动的详细信息，有助于管理员维护系统的安全性和稳定性。</p>\n<h2 id=\"课时十七-syslog-conf的配置审核\"><a href=\"#课时十七-syslog-conf的配置审核\" class=\"headerlink\" title=\"课时十七 syslog.conf的配置审核\"></a>课时十七 syslog.conf的配置审核</h2><p>如何审核系统的syslog.con的的配置满足要求呢？<br>执行more&#x2F;etc&#x2F;syslog.conf，查看是否包含下列项目：<br>Kern.*@host<br><em>.err@host<br>authpriv. @host<br>.info@host<br>mail.none@host<br>cron.none @host<br>.emerg@host<br>local7.</em>@host</p>\n<h2 id=\"课时十八-Web\"><a href=\"#课时十八-Web\" class=\"headerlink\" title=\"课时十八 Web\"></a>课时十八 Web</h2><p><code>隐藏Apache版本信息</code>，web服务器默认可以暴露apache版本信息<br><code>修改Apache配置文件/etc/httpd.conf，设置以下参数：</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ServerSignatureff  //禁止服务器端生成文档的页脚！</span><br><span class=\"line\">ServerTokensProd    //不包含OS类型和编译进的模块描述信息</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>禁止访问指定类型文件</code><br><code>修改Apache配置文件/etc/httpd.conf，设置以下参数：</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;FilesMatch &quot;.(htaccess|htpasswd|ini|conf|jpg|gif|png|bmp|sh)&gt;</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Deny from all</span><br><span class=\"line\">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure>\n\n<p>&lt;FilesMatch “.(htaccess|htpasswd|ini|conf|jpg|gif|png|bmp|sh）&gt;: 这是一个<FilesMatch>指令，它用于匹配文件名模式。在这里，它匹配任何以.htaccess、.htpasswd、.ini、.conf、.jpg、.gif、.png、.bmp、或.sh结尾的文件。</FilesMatch></p>\n<p>Order allow,deny: 这个指令定义了允许和拒绝访问的顺序。allow指令在前，deny在后。这意味着，如果一个用户匹配到allow规则，他们将被允许访问；否则，他们将匹配deny规则。</p>\n<p>Deny from all: 这个指令告诉服务器拒绝所有用户的访问。由于Order指令设置了先允许后拒绝的顺序，这条规则实际上会拒绝所有尝试访问匹配文件类型的用户，因为没有任何allow规则在前面允许他们的访问。</p>\n<p>: 这是<FilesMatch>指令的结束标签。</FilesMatch></p>\n<p>在更现代的Apache配置中，<code>Order</code>, <code>Allow</code>, 和 <code>Deny</code> 指令已被 <code>Require</code> 指令取代，用于更简洁和安全地控制访问权限。例如：</p>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;FilesMatch <span class=\"string\">&quot;.(htaccess|htpasswd|ini|conf|sh)$&quot;</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"attribute\">Require</span> <span class=\"literal\">all</span> denied  </span><br><span class=\"line\"><span class=\"section\">&lt;/FilesMatch&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>这将达到同样的效果，即禁止所有用户访问匹配的文件类型。</p>\n<h2 id=\"课时十九-FTP\"><a href=\"#课时十九-FTP\" class=\"headerlink\" title=\"课时十九 FTP\"></a>课时十九 FTP</h2><p>FTP（File Transfer Protocol，文件传输协议）的匿名用户的名称账号通常是“anonymous”。这是大多数提供公共资料的FTP服务器都提供的匿名服务，允许Internet用户随时访问这些服务器而不需要预先向服务器申请账号。在匿名FTP服务中，用户可以使用“anonymous”作为账号，而密码通常是“guest”或者用户的电子邮箱地址。</p>\n<p>为了保证FTP服务器的安全，几乎所有匿名服务器都只允许用户从服务器上下载文件，而不能上传或修改服务器上的内容。这是因为匿名用户没有经过身份验证，服务器无法确认其身份和权限，因此只能提供有限的访问权限。</p>\n<p><code>禁止匿名用户访问及上传</code><br><code>修改vsftpd配置文件/etc/vsftpd/vsftpd.conf</code>，设置以下参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">anonymous_enable=NO           //禁止匿名访问</span><br><span class=\"line\">anon_upload_enable=NO          //禁止匿名用户上传文件</span><br><span class=\"line\">anon_mkdir_write_enable=NO  \t//禁止匿名用户的写和创建目录的权限</span><br><span class=\"line\">anon_other_write_enable=NO    //禁止匿名用户进行删除或者改名等操作</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>限制服务器链接数</code></p>\n<p><code>修改vsftpd配置文件/etc/vsftpd/vsftpd.conf</code>，设置以下参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">maxclients=10             //最大链接数</span><br><span class=\"line\">max_per_ip=5              //每个IP的最大链接数</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"课时二十-SSH\"><a href=\"#课时二十-SSH\" class=\"headerlink\" title=\"课时二十 SSH\"></a>课时二十 SSH</h2><p><code>禁止root用户登录</code></p>\n<p><code>修改ssh配置文件/etc/ssh/sshd_config</code>，设置以下参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PermitRootLogin no</span><br></pre></td></tr></table></figure>\n\n\n\n<p><code>禁止空密码用户登录</code></p>\n<p><code>修改ssh配置文件/etc/ssh/sshd_config</code>，设置以下参数:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PermitEmptyPasswords no</span><br></pre></td></tr></table></figure>\n\n\n\n<p>SSH禁止root用户和空密码用户登录具有以下几个重要作用：</p>\n<ol>\n<li><strong>安全性增强</strong>：<ul>\n<li><strong>禁止root用户登录</strong>：root用户拥有系统的最高权限，可以执行任何操作。如果root账户被恶意用户获取，那么整个系统都可能面临被完全控制的风险。通过禁止root用户直接通过SSH登录，可以大大降低这种风险。</li>\n<li><strong>禁止空密码用户登录</strong>：空密码意味着没有设置密码，这意味着任何知道该用户名的人都可以无需任何验证即可登录。这显然是一个巨大的安全隐患。禁止空密码用户登录可以防止这种情况发生。</li>\n</ul>\n</li>\n<li><strong>权限控制</strong>：<ul>\n<li>通过禁止root用户直接登录，可以强制用户使用普通用户账户登录，然后通过sudo或其他机制提升权限。这样可以更好地控制和管理用户的权限。</li>\n</ul>\n</li>\n<li><strong>审计和日志记录</strong>：<ul>\n<li>当系统被攻击或发生问题时，审计和日志记录是非常重要的。如果允许root用户直接登录，那么攻击者可能会迅速隐藏其踪迹。通过禁止root登录，可以确保所有操作都通过普通用户账户进行，从而更容易追踪和审计。</li>\n</ul>\n</li>\n<li><strong>遵循最佳实践</strong>：<ul>\n<li>在系统管理和网络安全领域，禁止root用户和空密码用户直接通过SSH登录被广泛认为是最佳实践之一。这有助于确保系统的安全性和稳定性。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"课时二十一-iptables\"><a href=\"#课时二十一-iptables\" class=\"headerlink\" title=\"课时二十一 iptables\"></a>课时二十一 iptables</h2><p>iptables是一个网络包过滤器，用于在Linux系统中控制和过滤网络流量。包过滤防火墙（pack filtering）在网络层对数据包进行选择过滤，采用访问控制列表（AccesscontroltableACL）检查数据流的源地址，目的地址，源和目的端口，IP等信息。</p>\n<p><code>iptables基础</code></p>\n<p>1.规则（rules）：网络管理员预定义的条件<br>2.链（chains）：数据包传播的路径<br>3.表（tables）：内置3个表：filter表，nat表，mangle表</p>\n<p>4.iptables命令格式：<br>    iptables[-t表]命令匹配动作<br>      动作选项：<br>     （1）ACCEPT      接收数据包（2）DROP        去弃数据包</p>\n<p><code>iptables实例</code><br>1.查看filter表所有链的规则列表</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -t filter -nL</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>iptables</code>: 调用 iptables 工具。</li>\n<li><code>-t filter</code>: 指定表（table）为 <code>filter</code>。<code>filter</code> 表是 iptables 中最常用的表，它包含用于处理数据包过滤的规则。</li>\n<li><code>-n</code>: 使用数字格式显示地址和端口，而不是尝试解析主机名、网络名或服务名。</li>\n<li><code>L</code>: 列出（List）规则。</li>\n</ul>\n<p>执行这个命令后，你会看到 <code>filter</code> 表中定义的所有规则。这通常包括 <code>INPUT</code>、<code>OUTPUT</code> 和 <code>FORWARD</code> 这三个链（chain）的规则，这些链分别用于处理进入、离开和转发通过系统的数据包。</p>\n<p>2.清除已有iptables规则</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -F</span><br><span class=\"line\">iptables -X</span><br></pre></td></tr></table></figure>\n\n<p>iptables -F这个命令用于清空（Flush）指定链上的所有规则。如果不指定链名，该命令将清空所有链上的规则。</p>\n<p>ptables -X这个命令用于删除（Delete）指定的用户自定义链。如果链中存在任何规则或引用，该命令会失败，除非使用 -f 选项强制删除链及其规则。</p>\n<p>3.禁止IP为10.10.8.5的主机从eth0访问本机</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -t filter -A INPUT -s 10.10.8.5 -i eth0 -j DROP</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>iptables</code>: 调用 iptables 工具。</li>\n<li><code>-t filter</code>: 指定表（table）为 <code>filter</code>。<code>filter</code> 表用于处理数据包的过滤。</li>\n<li><code>-A INPUT</code>: 在 <code>INPUT</code> 链（chain）中添加（Append）一条规则。<code>INPUT</code> 链用于处理进入系统的数据包。</li>\n<li><code>-s 10.10.8.5</code>: 指定源 IP 地址为 <code>10.10.8.5</code>。这意味着规则仅适用于从该 IP 地址发出的数据包。</li>\n<li><code>-i eth0</code>: 指定网络接口为 <code>eth0</code>。这意味着规则仅适用于通过该接口接收到的数据包。</li>\n<li><code>-j DROP</code>: 指定目标动作为 <code>DROP</code>。这意味着匹配该规则的数据包将被丢弃，不会被传递或处理。</li>\n</ul>\n<p>4.禁止子网172.16.0.0&#x2F;16访问Web服务</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables-t filter -A INPUT -s 172.16.0.0/16 -p tcp --dport 80 -j DROP</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>-s 172.16.0.0/16</code>: 指定源 IP 地址范围为 <code>172.16.0.0</code> 到 <code>172.16.255.255</code>。CIDR 表示法 <code>/16</code> 表示前 16 位是网络地址，后 16 位是主机地址。这意味着规则适用于从 <code>172.16.0.0</code> 到 <code>172.16.255.255</code> 范围内的所有 IP 地址发出的数据包。</li>\n<li><code>-p tcp</code>: 指定协议类型为 TCP。</li>\n<li><code>--dport 80</code>: 指定目标端口为 80，即 HTTP 服务的默认端口。</li>\n<li><code>-j DROP</code>: 指定动作为 <code>DROP</code>，即丢弃匹配该规则的数据包。</li>\n</ul>\n<p>综合以上各个部分，这条命令的作用是：在 filter 表的 INPUT 链中添加一条规则，该规则将丢弃所有来自 172.16.0.0&#x2F;16的 IP 地址范围，且目标端口为 80（HTTP 服务）的 TCP 数据包。</p>\n",
            "tags": [
                "原创",
                "转载",
                "信息安全"
            ]
        }
    ]
}