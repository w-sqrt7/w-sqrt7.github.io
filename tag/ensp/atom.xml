<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://w-sqrt7.github.io</id>
    <title>sqrt7 • Posts by &#34;ensp&#34; tag</title>
    <link href="https://w-sqrt7.github.io" />
    <updated>2024-05-27T10:23:30.862Z</updated>
    <category term="原创" />
    <category term="逆向" />
    <category term="C语言" />
    <category term="misc" />
    <category term="汇编" />
    <category term="web" />
    <category term="网基" />
    <category term="eNSP" />
    <category term="转载" />
    <category term="信息安全" />
    <category term="渗透" />
    <category term="哲学" />
    <category term="工具" />
    <category term="基础" />
    <category term="kali" />
    <category term="靶场" />
    <category term="vulhub" />
    <category term="xss-labs" />
    <entry>
        <id>https://w-sqrt7.github.io/2024/05/27/eNSP/GRE-VPN%E9%85%8D%E7%BD%AE/</id>
        <title>GRE VPN配置</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/05/27/eNSP/GRE-VPN%E9%85%8D%E7%BD%AE/"/>
        <content type="html">&lt;h1 id=&#34;GRE-VPN配置&#34;&gt;&lt;a href=&#34;#GRE-VPN配置&#34; class=&#34;headerlink&#34; title=&#34;GRE VPN配置&#34;&gt;&lt;/a&gt;GRE VPN配置&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/05/27/eNSP/GRE-VPN%E9%85%8D%E7%BD%AE/image-20240527183724828.png&#34; alt=&#34;image-20240527183724828&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先配置pc的ip子网掩码和网关&lt;/p&gt;
&lt;p&gt;2.然后开始对防火墙进行配置，配端口ip&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]ip address 192.168.0.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]ip address 202.0.0.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/0]ip address 192.168.1.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/1]ip address 202.0.0.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;这里开始把tunnel隧道也配置好&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int Tunnel 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-Tunnel0]ip address 172.16.10.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-Tunnel0]tunnel-protocol gre&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-Tunnel0]source 202.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-Tunnel0]destination 202.0.0.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-Tunnel0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]int Tunnel 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-Tunnel0]ip address 172.16.10.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-Tunnel0]tunnel-protocol gre&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-Tunnel0]source 202.0.0.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-Tunnel0]destination 202.0.0.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-Tunnel0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后配置安全区域&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone dmz &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-dmz]add interface Tunnel 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-dmz]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-untrust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2]firewall zone dmz &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-dmz]add interface Tunnel 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-dmz]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后配置防火墙的静态路由&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]ip route-static 192.168.1.0 24 Tunnel 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]ip route-static 192.168.0.0 24 Tunnel 0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;最后就是配置三条安全策略&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security]display this&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2024-05-27 11:10:27.880 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;security-policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; rule name gre1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone dmz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-address 192.168.0.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-address 192.168.1.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; rule name gre2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone dmz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-address 192.168.1.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-address 192.168.0.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; rule name gre3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone local&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone local&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  service gre&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;return&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security]display this&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2024-05-27 11:14:21.890 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;security-policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; rule name gre1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone dmz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-address 192.168.1.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-address 192.168.0.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; rule name gre2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone dmz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-address 192.168.0.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-address 192.168.1.0 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; rule name gre3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone local&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  source-zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone local&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  destination-zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  service gre&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;return&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;至此便完成了GRE VPN的配置，然后进行测试，不同内网中的主机是可以相互通信的，同样可以wireshark抓包进行查看&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/05/27/eNSP/GRE-VPN%E9%85%8D%E7%BD%AE/image-20240527191751145.png&#34; alt=&#34;image-20240527191751145&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/05/27/eNSP/GRE-VPN%E9%85%8D%E7%BD%AE/Screenshot_20240603_205336_net.csdn.csdnplus.jpg&#34; alt=&#34;Screenshot_20240603_205336_net.csdn.csdnplus&#34;&gt;&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-05-27T10:23:30.862Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/05/10/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87/</id>
        <title>防火墙双机热备</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/05/10/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87/"/>
        <content type="html">&lt;h1 id=&#34;防火墙双机热备&#34;&gt;&lt;a href=&#34;#防火墙双机热备&#34; class=&#34;headerlink&#34; title=&#34;防火墙双机热备&#34;&gt;&lt;/a&gt;防火墙双机热备&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图一：&#34;&gt;&lt;a href=&#34;#实验拓扑图一：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图一：&#34;&gt;&lt;/a&gt;实验拓扑图一：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/05/10/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87/image-20240510213512085.png&#34; alt=&#34;image-20240510213512085&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先将pc及涉及到的各个端口ip进行如上图配置&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/0]ip address 192.168.1.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]ip address 20.1.1.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/3]ip address 10.1.1.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/3]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/0]ip address 192.168.1.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]ip address 20.1.1.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/3]ip address 10.1.1.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/3]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;2.然后配置防火墙的安全区域&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-untrust]add interface g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]firewall zone dmz 	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-dmz]add interface g1/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-dmz]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-untrust]add interface g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]firewall zone dmz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-dmz]add interface g1/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-dmz]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;3.然后开始配置防火墙双机热备&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;#配置虚拟IP，即备份组IP&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/0]vrrp vrid 1 virtual-ip 192.168.1.254 24 active &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]vrrp vrid 2 virtual-ip 20.1.1.254 24 active &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;#绑定心跳口，注意端口和ip不要弄混淆，本设备配置端口和远程设备对应端口的ip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]hrp interface g1/0/3 remote 10.1.1.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#开启hrp备份&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]hrp enable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/0]vrrp vrid 1 virtual-ip 192.168.1.254 24 standby&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]vrrp vrid 2 virtual-ip 20.1.1.254 24 standby &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]hrp interface g1/0/3 remote 10.1.1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]hrp enable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;hr&gt;
&lt;p&gt;4.在FW1上配置安全策略，会同步备份至FW2，写一个安全策略进行验证&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1]security-policy (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security]rule name 1 (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]source-zone trust  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]destination-zone untrust  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]action permit  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;最后将FW1关闭，可以发现PC1和PC2依旧可以通过FW2进行通信&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;具体命令详解&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[USG1-GigabitEthernet1&amp;#x2F;0&amp;#x2F;0]vrrp vrid 1 virtual-ip 192.168.1.254 24 active&lt;br&gt;[USG1-GigabitEthernet1&amp;#x2F;0&amp;#x2F;2]vrrp vrid 2 virtual-ip 20.1.1.254 24 active &lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;配置FW1接口GigabitEthernet0&amp;#x2F;0&amp;#x2F;1的VRRP备份组1，并加入到状态为Active的VGMP管理组。&lt;/p&gt;
&lt;p&gt;配置FW1接口GigabitEthernet0&amp;#x2F;0&amp;#x2F;2的VRRP备份组2，并加入到状态为Active的VGMP管理组。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;vrrp: 表示我们正在配置 VRRP。&lt;/li&gt;
&lt;li&gt;vrid 1: VRRP 虚拟路由器标识符（VRID）是唯一的，用于标识一个 VRRP 组。在这里，VRID 是 1。&lt;/li&gt;
&lt;li&gt;virtual-ip 192.168.1.254 24: 这部分配置指定了虚拟 IP 地址（VIP）及其子网掩码。在这里，VIP 是 192.168.1.254，子网掩码的长度是 24（等同于 255.255.255.0）。这个 IP 地址不会分配给任何物理接口，而是作为整个 VRRP 组的虚拟地址，当主路由器工作时，它将成为该组的默认网关。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;active（主模式）或 standby（备份模式）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;active&lt;/code&gt;: 这表示该路由器是 VRRP 组中的主路由器（也称为 master）。在 VRRP 中，路由器可以是主路由器（负责转发数据）或备份路由器（在主路由器故障时接管）。当设置为 &lt;code&gt;active&lt;/code&gt; 时，路由器将尝试成为主路由器。然而，在真实配置中，通常会根据优先级来决定谁是主路由器，而不是直接指定为 &lt;code&gt;active&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;实验拓扑图二：&#34;&gt;&lt;a href=&#34;#实验拓扑图二：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图二：&#34;&gt;&lt;/a&gt;实验拓扑图二：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/05/10/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-05-11%20100338.png&#34; alt=&#34;屏幕截图 2024-05-11 100338&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：-1&#34;&gt;&lt;a href=&#34;#实验过程：-1&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.首先对FW1和FW2进行配置，对心跳口进行链路聚合&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int Eth-Trunk 18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]mode lacp-static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]max active-linknumber 2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]trunkport g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]trunkport g1/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]trunkport g1/0/4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int Eth-Trunk 18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]mode lacp-static&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]max active-linknumber 2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]trunkport g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]trunkport g1/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]trunkport g1/0/4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;2.然后配置相关端口ip&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/1]ip address 192.168.1.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]ip address 20.1.1.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int Eth-Trunk 18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]ip address 10.1.1.1 30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-Eth-Trunk18]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/1]ip address 192.168.1.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]ip address 20.1.1.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int Eth-Trunk 18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]ip address 10.1.1.2 30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-Eth-Trunk18]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;3.然后配置划分安全区域&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]firewall zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-trust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-untrust]add interface g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]firewall zone dmz &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-dmz]add interface Eth-Trunk 18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-zone-dmz]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-trust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-untrust]add interface g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]firewall zone dmz &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-dmz]add interface Eth-Trunk 18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-zone-dmz]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;4.然后开始配置hrp备份&lt;/p&gt;
&lt;p&gt;FW1&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/1]vrrp vrid 1 virtual-ip 192.168.1.254 24 active &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]vrrp vrid 2 virtual-ip 20.1.1.254 24 active &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG1]hrp interface Eth-Trunk 18 remote 10.1.1.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG1]hrp enable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;FW2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/1]vrrp vrid 1 virtual-ip 192.168.1.254 24 standby&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]int g1/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]vrrp vrid 2 virtual-ip 20.1.1.254 24 standby &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2-GigabitEthernet1/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG2]hrp interface Eth-Trunk 18 remote 10.1.1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG2]hrp enable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;5.最后便是写安全策略进行验证&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1]security-policy  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security]rule name 1 (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]source-zone trust  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]destination-zone untrust  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]action permit  (+B)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security-rule-1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;HRP_M[USG1-policy-security]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-05-10T14:29:08.140Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/05/05/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%9A%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%88NAT%EF%BC%89/</id>
        <title>防火墙业务管理（NAT）</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/05/05/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%9A%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%88NAT%EF%BC%89/"/>
        <content type="html">&lt;h1 id=&#34;防火墙业务管理（NAT）&#34;&gt;&lt;a href=&#34;#防火墙业务管理（NAT）&#34; class=&#34;headerlink&#34; title=&#34;防火墙业务管理（NAT）&#34;&gt;&lt;/a&gt;防火墙业务管理（NAT）&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/05/05/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%9A%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%88NAT%EF%BC%89/image-20240505181810396.png&#34; alt=&#34;image-20240505181810396&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先是将各个pc以及端口配置对应的ip&lt;/p&gt;
&lt;p&gt;2.然后开始配置防火墙，接口ip配置完成后加入对应的安全区域&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后配置防火墙的转发策略&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]security-policy &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security]rule name 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]source-zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]destination-zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]action permit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后配置NAT地址池&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]nat address-group pool1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-address-group-pool1]section 192.168.18.5 192.168.18.18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后配置NAT策略&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]nat-policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-nat]rule name source-nat&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-nat-rule-source-nat]source-zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-nat-rule-source-nat]destination-zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-nat-rule-source-nat]action source-nat address-group pool1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;由于公网上有多个网段，防火墙上需要添加缺省路由&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]ip route-static 0.0.0.0 0.0.0.0 192.168.18.2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;3.最后进行成果验证&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;PC&amp;gt;ping 192.168.19.1 -t&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]disp firewall session table&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&#34;/2024/05/05/eNSP/%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%9A%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%88NAT%EF%BC%89/image-20240505183716045.png&#34; alt=&#34;image-20240505183716045&#34;&gt;&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-05-05T11:26:54.181Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/04/16/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88/</id>
        <title>网基实践题-链路聚合</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/04/16/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-链路聚合&#34;&gt;&lt;a href=&#34;#网基实践题-链路聚合&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-链路聚合&#34;&gt;&lt;/a&gt;网基实践题-链路聚合&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/04/16/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-04-16%20111917.png&#34; alt=&#34;屏幕截图 2024-04-16 111917&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.配置pc机的ip网关等&lt;/p&gt;
&lt;p&gt;这里不在赘述&lt;/p&gt;
&lt;p&gt;2.在SW1和SW2上进行基础配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW1]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1]int e0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/1]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/1]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1]int e0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/2]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/2]port default vlan 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW2]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2]int vlanif 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Vlanif10]ip address 192.168.10.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Vlanif10]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2]int vlanif 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Vlanif20]ip address 192.168.20.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Vlanif20]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;3.进行链路聚合配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW1]int Eth-Trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Eth-Trunk1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1]int e0/0/5	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/5]eth-trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/5]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1]int e0/0/6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/6]eth-trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Ethernet0/0/6]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW2]int Eth-Trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Eth-Trunk1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2]int e0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Ethernet0/0/1]eth-trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Ethernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2]int e0/0/4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Ethernet0/0/4]eth-trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Ethernet0/0/4]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW1]int Eth-Trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Eth-Trunk1]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Eth-Trunk1]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-Eth-Trunk1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW2]int Eth-Trunk 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Eth-Trunk1]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Eth-Trunk1]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW2-Eth-Trunk1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后进行测试，结果为两台主机之间可以互相ping通&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-04-16T03:39:01.138Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/</id>
        <title>网基实践题-防火墙配置</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-防火墙配置&#34;&gt;&lt;a href=&#34;#网基实践题-防火墙配置&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-防火墙配置&#34;&gt;&lt;/a&gt;网基实践题-防火墙配置&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图一：&#34;&gt;&lt;a href=&#34;#实验拓扑图一：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图一：&#34;&gt;&lt;/a&gt;实验拓扑图一：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240411185710090.png&#34; alt=&#34;image-20240411185710090&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先配置云(cloud1)，根据自己的虚拟网卡配置，具体操作参考下图&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-04-11%20185831.png&#34; alt=&#34;屏幕截图 2024-04-11 185831&#34;&gt;&lt;/p&gt;
&lt;p&gt;2.然后配置防火墙，首先配本地访问的端口&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet0/0/0]ip address 192.168.100.18 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet0/0/0]service-manage enable	#防火墙安全策略配置管理协议启用访问管理&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet0/0/0]service-manage ping permit	#允许ping防火墙&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet0/0/0]service-manage http permit 	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet0/0/0]service-manage https permit	#允许浏览器访问防火墙进行配置&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;配置完成后，可以使用ping命令先测试，测试成功后，浏览器访问登录&lt;/p&gt;
&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240411190516243.png&#34; alt=&#34;image-20240411190516243&#34; style=&#34;zoom:50%;&#34;&gt;

&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240411190607110.png&#34; alt=&#34;image-20240411190607110&#34; style=&#34;zoom: 33%;&#34;&gt;



&lt;p&gt;3.然后配置防火墙安全区域，即使pc1能够和防火墙正常通信&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet1/0/0]ip address 192.168.100.20 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet1/0/0]service-manage enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet1/0/0]service-manage all permit &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1]firewall zone trust 	#进入trust区域&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-zone-trust]add interface g1/0/0	#将接口G1/0/0添加到trust区域中&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后再尝试利用pc机ping防火墙，可以正常通信。&lt;/p&gt;
&lt;h2 id=&#34;实验拓扑图二：&#34;&gt;&lt;a href=&#34;#实验拓扑图二：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图二：&#34;&gt;&lt;/a&gt;实验拓扑图二：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240416094036246.png&#34; alt=&#34;image-20240416094036246&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：-1&#34;&gt;&lt;a href=&#34;#实验过程：-1&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先配置pc1和pc2，注意网关&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240416094200587.png&#34; alt=&#34;image-20240416094200587&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240416094249574.png&#34; alt=&#34;image-20240416094249574&#34;&gt;&lt;/p&gt;
&lt;p&gt;2.然后配置防火墙的两个端口，就是刚才两台pc机的网关。&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;USG6000V1&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[USG6000V1]sysname FW1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]ip address 10.1.2.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]ip address 2.2.2.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;3.然后配置各端口上的service-manage，保证ping命令能够允许&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]service-manage enable&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]service-manage ping permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]service-manage enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]service-manage ping permit &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;4.然后配置不同的安全区域并加入对应的端口&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone trust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone untrust&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;5.然后开始配置安全策略，使pc1可以ping通pc2&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]security-policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security]rule name 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]source-address 10.1.2.1 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]destination-address 2.2.2.2 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]service icmp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后进行验证，结果应当是pc1可以ping通pc2，但是pc2无法ping通pc1&lt;/p&gt;
&lt;h2 id=&#34;实验拓扑图三：&#34;&gt;&lt;a href=&#34;#实验拓扑图三：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图三：&#34;&gt;&lt;/a&gt;实验拓扑图三：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/04/11/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE/image-20240416104546562.png&#34; alt=&#34;image-20240416104546562&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：-2&#34;&gt;&lt;a href=&#34;#实验过程：-2&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先配置pc机的ip网关以及各个设备的端口的ip，具体如上图&lt;/p&gt;
&lt;p&gt;这边就不在展示了，很基础的，就给各个端口配各ip，注意不要漏了，这里就先只配ip，其他的暂时不要动，跟着后面的步骤走&lt;/p&gt;
&lt;p&gt;2.然后开始配置两个防火墙的端口的service-manage&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]service-manage enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]service-manage ping permit &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]service-manage enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]service-manage ping permit &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]int g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/0]service-manage enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/0]service-manage ping permit &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2]int g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/1]service-manage enable &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/1]service-manage ping permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-GigabitEthernet1/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;3.然后配置安全区域&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1]firewall zone untrust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]firewall zone trust &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-trust]add interface g1/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-trust]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2]firewall zone untrust 	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-untrust]add interface g1/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-zone-untrust]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;4.然后配置安全策略&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]security-policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security]rule name 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]source-address 10.18.1.1 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]destination-address 10.18.2.1 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]service icmp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]action permit &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security-rule-1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-policy-security]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]security-policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security]rule name 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security-rule-1]source-address 10.18.1.1 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security-rule-1]destination-address 10.18.2.1 mask 255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security-rule-1]service icmp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security-rule-1]action permit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security-rule-1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-policy-security]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;5.最后开始配置ospf，保证网络的连通&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR1]ospf 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-ospf-1-area-0.0.0.0]network 10.18.11.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-ospf-1-area-0.0.0.0]network 10.18.12.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW1]ospf 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1-area-0.0.0.0]network 10.18.11.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1]area 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1-area-0.0.0.1]network 10.18.1.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1-area-0.0.0.1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW1-ospf-1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[FW2]ospf 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1-area-0.0.0.0]network 10.18.12.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1]area 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1-area-0.0.0.1]network 10.18.2.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1-area-0.0.0.1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[FW2-ospf-1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后进行测试，结果为pc1可以ping通pc2，但是pc2无法ping通pc1&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-04-11T11:32:04.546Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-NAT/</id>
        <title>网基实践题-NAT</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-NAT/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-NAT&#34;&gt;&lt;a href=&#34;#网基实践题-NAT&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-NAT&#34;&gt;&lt;/a&gt;网基实践题-NAT&lt;/h1&gt;&lt;p&gt;&lt;a href=&#34;https://so.csdn.net/so/search?q=ensp&amp;spm=1001.2101.3001.7020&#34;&gt;ensp&lt;/a&gt;中NAT种类的分类&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;作用&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;static NAT （静态NAT）&lt;/td&gt;
&lt;td&gt;一个私网地址只能够对应一个公网IP地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;easy IP （动态NAT）&lt;/td&gt;
&lt;td&gt;多个私网地址对应一个公网地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NAT Server&lt;/td&gt;
&lt;td&gt;外网客户端访问内网服务器时就会用到这个&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;私网IP地址的范围&lt;/p&gt;
&lt;figure class=&#34;highlight handlebars&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;language-xml&#34;&gt;A类地址:10.0.0.0～10.255.255.255 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;language-xml&#34;&gt;B类地址:172.16.0.0 ～172.31.255.255 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;language-xml&#34;&gt;C类地址:192.168.0.0～192.168.255.255&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-NAT/image-20240409215941199.png&#34; alt=&#34;image-20240409215941199&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先按照上图将PC机以及相关的路由器各个端口进行配置&lt;/p&gt;
&lt;p&gt;AR1配置如下&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/0]ip address 7.7.7.7 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/1]ip address 192.168.1.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR2配置如下&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2-GigabitEthernet0/0/0]ip address 7.7.7.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2-GigabitEthernet0/0/0]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2-GigabitEthernet0/0/1]ip address 8.8.8.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2-GigabitEthernet0/0/1]int g0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2-GigabitEthernet0/0/2]ip address 9.9.9.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR2-GigabitEthernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;2.然后AR1需要配置缺省路由，又叫默认路由（比较特殊的静态路由）&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR1]ip route-static 0.0.0.0 0.0.0.0 7.7.7.1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;3.然后配置规则，配置nat&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR1]acl number 2000&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-acl-basic-2000]rule 5 permit source 192.168.1.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-acl-basic-2000]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/0]nat server protocol tcp global current-interface 80 inside 192.168.1.200 80	#这个配置的是NAT Server，将内网服务器192.168.1.200的80端口映射到当前端口公有地址7.7.7.7的80端口&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/0]nat static global 7.7.7.0 inside 192.168.1.0	#这一行命令和上面的二选一就行，这个是配置静态NAT的，还需要命令nat static enable&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/0]nat outbound 2000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后就可以发现内网的pc1和pc2是可以ping通外网的外网的却无法ping内网&lt;/p&gt;
&lt;p&gt;具体命令解析：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nat static global 7.7.7.2 inside 192.168.1.100 &lt;/code&gt;     将内网IP地址为192.168.1.100的主机访问外网时，交给公网IP地址7.7.7.2去处理（注：这个公网IP地址是自己指定的）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nat server protocol tcp global current-interface 80 inside 192.168.1.200 80&lt;/code&gt; 的具体解析如下：&lt;/p&gt;
&lt;p&gt;protocol tcp: 这表示NAT服务器将使用TCP协议进行流量转发。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;global current-interface 80: 这部分配置定义了全局地址和端口号。&lt;ul&gt;
&lt;li&gt;global: 表示这是一个全局地址，即用于外部网络访问的地址。&lt;/li&gt;
&lt;li&gt;current-interface: 表示使用当前接口（通常是连接到外部网络的接口）的IP地址作为全局地址。这通常用于动态获取接口的公网IP地址。&lt;/li&gt;
&lt;li&gt;80: 这是外部网络访问内部服务器时所使用的端口号。在这里，它设置为HTTP服务的标准端口号80。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;inside 192.168.1.200 80: 这部分配置定义了内部服务器的地址和端口号。&lt;ul&gt;
&lt;li&gt;inside: 表示这是一个内部地址，即内部网络中服务器的地址。&lt;/li&gt;
&lt;li&gt;192.168.1.200: 这是内部服务器的IP地址。&lt;/li&gt;
&lt;li&gt;80: 这是内部服务器上运行的服务所监听的端口号。在这里，它同样设置为80，表示内部服务器正在监听HTTP服务。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;综上所述，这条命令的作用是配置一个NAT服务器映射，使得外部网络可以通过当前接口的公网IP地址的80端口访问内部网络中IP地址为192.168.1.200的服务器的80端口（通常是HTTP服务）。&lt;/p&gt;
&lt;p&gt;在配置NAT服务器之前，请确保：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;内部服务器已经启动并且服务（在这里是HTTP服务）正在监听指定的端口。&lt;/li&gt;
&lt;li&gt;设备的外部接口已经配置并获得了有效的公网IP地址。&lt;/li&gt;
&lt;li&gt;设备的路由配置允许外部流量到达NAT服务器映射。&lt;/li&gt;
&lt;li&gt;防火墙规则允许相关的TCP流量通过。&lt;/li&gt;
&lt;/ol&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-04-09T14:56:26.651Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-ACL/</id>
        <title>网基实践题-ACL</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-ACL/"/>
        <content type="html">&lt;p&gt;&lt;strong&gt;ACL的分类&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;基本ACL（2000-2999）&lt;/th&gt;
&lt;th&gt;根据源地址来进行访问控制&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;高级ACL（3000-3999）&lt;/td&gt;
&lt;td&gt;可以根据源地址、目标地址、源端口号等来进行访问控制&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;注：我们在不管在配置什么ACL的时候，需先保证全网互通，然后在根据需要来进行设置ACL访问控制&lt;/p&gt;
&lt;h1 id=&#34;网基实践题-ACL&#34;&gt;&lt;a href=&#34;#网基实践题-ACL&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-ACL&#34;&gt;&lt;/a&gt;网基实践题-ACL&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h2&gt;&lt;img src=&#34;/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-ACL/image-20240409211406928.png&#34; alt=&#34;image-20240409211406928&#34; style=&#34;zoom: 33%;&#34;&gt;

&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;1.首先保证PC1和PC2能够互通（具体的就不写了，基本的）&lt;/p&gt;
&lt;img src=&#34;/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-ACL/image-20240409211921518.png&#34; alt=&#34;image-20240409211921518&#34; style=&#34;zoom:50%;&#34;&gt;



&lt;p&gt;2.配置访问控制列表&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR1]acl number 2000 [match-order auto|config] #这里我是设置的auto&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-acl-basic-2000]rule deny source 1.1.1.10 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-acl-basic-2000]rule permit source 1.1.1.0 0.0.0.255 #实际上这个规则是不起作用的，只是方便理解什么是‘深度优先’。上面的设置如果不是auto而是config的话，要加上id号，即rule id [deny|permit]......&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-acl-basic-2000]display this	#这一步也可以忽略，这里只是列出来方便理解&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#acl number 2000  match-order auto&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# rule 5 deny source 1.1.1.10 0 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# rule 10 permit source 1.1.1.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-acl-basic-2000]int g0/0/0	#进入端口，引用规则&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR1-GigabitEthernet0/0/0]traffic-filter inbound acl 2000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;配置完成之后可以发现PC1的流量没法出去了&lt;/p&gt;
&lt;img src=&#34;/2024/04/09/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-ACL/image-20240409214259683.png&#34; alt=&#34;image-20240409214259683&#34; style=&#34;zoom:50%;&#34;&gt;





&lt;p&gt;具体解析：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;match-order auto&lt;/code&gt;：这个参数设置ACL规则的匹配顺序为自动。当设置为“自动”时，系统将按照“深度优先”的顺序自动对规则进行排序。如果“深度优先”的顺序相同，则按照rule-id由小到大的顺序进行匹配。&lt;/p&gt;
&lt;p&gt;当您在创建ACL时指定 &lt;code&gt;match-order config&lt;/code&gt;，这意味着ACL规则将按照您在配置中指定的顺序进行匹配。这意味着规则的顺序对于过滤决策至关重要，因为系统会根据规则在配置中出现的顺序来依次评估它们。&lt;/p&gt;
&lt;p&gt;需要注意的是，如果在创建ACL时没有明确指定 &lt;code&gt;match-order&lt;/code&gt; 参数，那么默认的规则匹配顺序通常是 &lt;code&gt;config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ACL的inbound和outbound有什么区别：&lt;/p&gt;
&lt;p&gt;inbound和outbound的主要区别在于它们处理网络流量的方向不同。&lt;/p&gt;
&lt;p&gt;Inbound（入站）是指从外部网络（例如Internet）进入本地网络中的数据流量。这种方向的ACL规则主要用于保护内部网络资源免受未经授权的访问和攻击。&lt;/p&gt;
&lt;p&gt;Outbound（出站）则是指从本地网络向外部网络发送的数据流量。这种方向的ACL规则主要用于控制内部网络向外部发送的数据，以防止敏感信息的泄露或不合规的外部访问。&lt;/p&gt;
&lt;p&gt;Inbound方向更侧重于保护内部网络资源，而outbound方向则更侧重于控制内部网络向外部的流量。&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-04-09T13:47:03.460Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/03/01/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-OSPF/</id>
        <title>网基实践题-OSPF</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/03/01/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-OSPF/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-OSPF&#34;&gt;&lt;a href=&#34;#网基实践题-OSPF&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-OSPF&#34;&gt;&lt;/a&gt;网基实践题-OSPF&lt;/h1&gt;&lt;h2 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;/2024/03/01/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-OSPF/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-03-03%20161825.png&#34; alt=&#34;屏幕截图 2024-03-03 161825&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h2&gt;&lt;p&gt;首先将pc机的ip，子网掩码，网关等按上图要求配置完成，然后开始开始配置路由器的各个端口的ip地址&lt;/p&gt;
&lt;p&gt;AR1的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/1]ip address 192.168.10.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/0]ip address 192.168.20.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR2的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR 2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/0]ip address 192.168.20.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/1]ip address 192.168.30.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR3的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR 3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-GigabitEthernet0/0/0]ip address 192.168.30.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-GigabitEthernet0/0/1]ip address 192.168.40.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;p&gt;然后就是正式开始配置OSPF了&lt;/p&gt;
&lt;p&gt;配置注意点（本人踩坑过）：&lt;/p&gt;
&lt;p&gt;1.area区域，一定要从0开始计算，一个一个往上加，不能随意，否则后面会出问题的&lt;/p&gt;
&lt;p&gt;2.注意“router-id”和“router id”是两种不同的意思。“router-id”才是在配置ospf时所用到的&lt;/p&gt;
&lt;p&gt;使用 “ospf router-id 1.1.1.1” 明确地指定了是在配置 OSPF 时的 Router ID，这减少了混淆的可能性。&lt;br&gt;“router id 1.1.1.1” 可能不够明确，因为它可能适用于多个路由协议，这可能导致配置时的不确定性。&lt;/p&gt;
&lt;p&gt;ospf配置思路：&lt;/p&gt;
&lt;p&gt;单区域：配置路由器，使用如ospf router-id 1.1.1.1，后进入指定的单个area，即area0一般，然后network和路由器相邻的两条链路的网段，形式为 “network 网络地址 反子网掩码”，每个路由器都进行如此配置&lt;/p&gt;
&lt;p&gt;多区域：配置路由器，使用如ospf router-id 1.1.1.1，后进入指定的单个area，即area0一般，然后观察路由器的端口和区域，端口在那个区域，就在哪个区域里network该端口链路上的网络地址和反子网掩码，每个路由器都进行如此配置&lt;/p&gt;
&lt;p&gt;OK，我们先来尝试看一下单区域的ospf是如何配置的&lt;/p&gt;
&lt;p&gt;AR1的配置如下:&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]ospf router-id 1.1.1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]network 192.168.10.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]network 192.168.20.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]network 1.1.1.1 0.0.0.0		//这一步是非必要的，如果后面想要可以直接ping 1.1.1.1 的话，是需要这一步的，但是这里还有前置配置回环地址为1.1.1.1的，然后router-id更多的是一个标记，尽量和回环地址配置一样，具体条件我在下面补充，再次提醒，非必须。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int loopback 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-LoopBack0]ip address 1.1.1.1 32  &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;//两外的两个也进行如此配置，具体的自行更改&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR2的配置如下:&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]ospf router-id 2.2.2.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.0]network 192.168.20.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.0]network 192.168.30.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.0]network 2.2.2.2 0.0.0.0	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR3的配置如下:&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 3]ospf router-id 3.3.3.3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.0]network 192.168.30.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.0]network 192.168.40.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.0]network 3.3.3.3 0.0.0.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后开始来尝试配置多区域的ospf（单区域和多区域选一个就行，不要傻傻的配完单区域，又来跟我配置多区域，我这里只是笔记记录，不包会的）:&lt;/p&gt;
&lt;p&gt;AR1的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]ospf router-id 1.1.1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]network 192.168.20.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]network 192.168.10.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR2的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]ospf router-id 2.2.2.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1]area 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.0]network 192.168.20.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1]area 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-ospf-1-area-0.0.0.1]network 192.168.30.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR3的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 3]ospf router-id 3.3.3.3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1]area 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.1]network 192.168.30.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.1]network 192.168.40.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 3-ospf-1-area-0.0.0.1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;要想ping通router-id的话，还是要配置loopback，方法上面有的&lt;/p&gt;
&lt;p&gt;en…(x_x)，总共两个区域，一个area0，一个area1，图上刚开始没有标明出来，应该也能分的清楚的吧。。。(。・∀・)ノ&lt;/p&gt;
&lt;p&gt;还有再提一下network，&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;network 192.168.20.0 0.0.0.255&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;or&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;network 192.168.20.1 0.0.0.0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;看到区别了吧，一个是网络地址，一个是具体的接口IP地址，都是可以的，但建议优先选择上面一个&lt;/p&gt;
&lt;p&gt;拓扑图比较简单，配置起来也是大差不差的，到这里如果还有问题，检查一下你pc机的配置，在检查你各个端口啥的配置或者以下命令尝试查看&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;disp this	//进入端口，查看端口配置信息&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;disp int g0/0/0		//直接查看端口配置信息&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;disp ip routing-table	//查看路由表&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;display current  //查看设备所有配置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;p&gt;这里再额外补充一个telnet登录，继续用上面的拓扑图&lt;/p&gt;
&lt;p&gt;首先配置交换机&lt;/p&gt;
&lt;p&gt;LSW1的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;LSW 1&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int e0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Ethernet0/0/2]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Ethernet0/0/2]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Ethernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int e0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Ethernet0/0/1]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Ethernet0/0/1]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-vlan 10]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int vlanif 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Vlanif10]ip address 192.168.10.1 24	//配置交换机的ip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Vlanif10]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]ip route-static 0.0.0.0 0 192.168.10.254		//配置缺省&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;上面是只是保证基础的连通性，然后才正式开始配置telnet&lt;/p&gt;
&lt;p&gt;AR1的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;AR 1&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]telnet server enable		//启用Telnet服务器&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]user-interface vty 0 4	//选择虚拟终端接口范围，从0到4。VTY（Virtual Teletype）接口通常用于远程登录，如Telnet或SSH。0到4即最多同时5个虚拟终端会话&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ui-vty0-4]authentication-mode  aaa		//设置认证模式为AAA（Authentication, Authorization, and Accounting）。这意味着远程用户登录时，将使用AAA框架进行身份验证、授权和计费。即需要用户名和密码，设为password时，只需要密码&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ui-vty0-4](user privilege level 3)		//设置用户权限级别为3,可进入aaa配置单个用户的权限&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ui-vty0-4]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]aaa		//进入AAA配置模式。从这里开始，您可以配置与AAA相关的各种参数，如用户、角色、权限等。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-aaa]local-user service-type telnet	//用于指定本地用户的接入类型为 Telnet&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-aaa]local-user sqrt password cipher abcd (privilege level 3)		//在AAA模式下，创建一个本地用户名为“sqrt”，并为其设置加密密码“abcd”。cipher 指的是密码是以加密方式存储的，可使用simple，即明文方式&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后LSW1尝试telnet登录AR1：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;LSW 1&amp;gt;telnet 192.168.10.254&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Username:sqrt&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Password:abcd(不显示的)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;然后就登录成功了。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;AR 1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;欧克，就到这里吧o(&lt;em&gt;￣▽￣&lt;/em&gt;)ブ&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-03-01T14:18:19.595Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE/</id>
        <title>网基实践题-交换机配置</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-交换机配置&#34;&gt;&lt;a href=&#34;#网基实践题-交换机配置&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-交换机配置&#34;&gt;&lt;/a&gt;网基实践题-交换机配置&lt;/h1&gt;&lt;h2 id=&#34;二层交换机配置&#34;&gt;&lt;a href=&#34;#二层交换机配置&#34; class=&#34;headerlink&#34; title=&#34;二层交换机配置&#34;&gt;&lt;/a&gt;二层交换机配置&lt;/h2&gt;&lt;h3 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-27%20220330.png&#34; alt=&#34;屏幕截图 2024-02-27 220330&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h3&gt;&lt;p&gt;首先将各个主机的ip和子网掩码配置，网关这里可以不用在意&lt;/p&gt;
&lt;p&gt;配置完成后可以发现4台主机之间是可以相互ping通的，因为是在同一网段内，我们的任务是配置两个vlan，使得vlan10的主机只和vlan10的主机相互通，vlan20的主机只和vlan20的主机相互通，进行如下配置&lt;/p&gt;
&lt;p&gt;首先进行基础配置&lt;/p&gt;
&lt;p&gt;LSW1的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname LSW1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1]int e0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/1]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/1]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1]int e0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/2]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/2]port default vlan 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;LSW2的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int e0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Huawei-Ethernet0/0/1]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-Ethernet0/0/1]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-Ethernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/2]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/2]port default vlan 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后开始trunk配置&lt;/p&gt;
&lt;p&gt;LSW1的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[LSW1]int e0/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/3]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/3]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW1-Ethernet0/0/3]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;LSW2的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int e0/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-Ethernet0/0/3]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-port-group-trunk]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-port-group-trunk]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;（〃｀ 3′〃）如果ping不通，先别急哦，让子弹飞一会，~~~要么就是哪里的小细节除了问题，实在不行，再从头来一遍,反正要不了多久，也可以重启试试。~~&lt;/p&gt;
&lt;h2 id=&#34;三层交换机配置&#34;&gt;&lt;a href=&#34;#三层交换机配置&#34; class=&#34;headerlink&#34; title=&#34;三层交换机配置&#34;&gt;&lt;/a&gt;三层交换机配置&lt;/h2&gt;&lt;h3 id=&#34;实验拓扑图：-1&#34;&gt;&lt;a href=&#34;#实验拓扑图：-1&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-03-01%20225507.png&#34; alt=&#34;屏幕截图 2024-03-01 225507&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;实验过程：-1&#34;&gt;&lt;a href=&#34;#实验过程：-1&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h3&gt;&lt;p&gt;将主机的ip，网关等先配置好，然后开始配置二层交换机和主机相连，配置vlan&lt;/p&gt;
&lt;p&gt;LSW2的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname LSW 2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2]int e0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-Ethernet0/0/2]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-Ethernet0/0/2]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-Ethernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LSW 2]int e0/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-Ethernet0/0/3]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-Ethernet0/0/3]port default vlan 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-Ethernet0/0/3]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;LSW3的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname LSW 3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3]int e0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-Ethernet0/0/2]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-Ethernet0/0/2]port default vlan 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-Ethernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3]int e0/0/3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-Ethernet0/0/3]port link-type access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-Ethernet0/0/3]port default vlan 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-Ethernet0/0/3]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;然后配置二层交换机和三层交换机的trunk链路&lt;/p&gt;
&lt;p&gt;LSW1的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname LSW 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]vlan batch 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-GigabitEthernet0/0/1]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-GigabitEthernet0/0/1]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int g0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-GigabitEthernet0/0/2]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-port-group-trunk]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-port-group-trunk]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;LSW2的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-GigabitEthernet0/0/1]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-GigabitEthernet0/0/1]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 2-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;LSW3的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-GigabitEthernet0/0/1]port link-type trunk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-GigabitEthernet0/0/1]port trunk allow-pass vlan 10 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 3-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;最后开始配置vlanif，给予ip&lt;/p&gt;
&lt;p&gt;LSW1的配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int vlanif 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Vlanif10]ip address 192.168.10.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Vlanif10]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1]int vlanif 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Vlanif20]ip address 192.168.20.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[LSW 1-Vlanif20]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;del&gt;按理来说，到这里就已经完成了，没啥问题了，但我配置交换机的时候，一直出问题，还是找不到原因的问题，这里建议save保存配置之后重启在尝试。&lt;/del&gt;&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-02-27T14:01:07.869Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/</id>
        <title>网基实践题-静态路由</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-静态路由&#34;&gt;&lt;a href=&#34;#网基实践题-静态路由&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-静态路由&#34;&gt;&lt;/a&gt;网基实践题-静态路由&lt;/h1&gt;&lt;h2 id=&#34;静态路由-实验一&#34;&gt;&lt;a href=&#34;#静态路由-实验一&#34; class=&#34;headerlink&#34; title=&#34;静态路由-实验一&#34;&gt;&lt;/a&gt;静态路由-实验一&lt;/h2&gt;&lt;h3 id=&#34;实验拓扑图：&#34;&gt;&lt;a href=&#34;#实验拓扑图：&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-27%20142053.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;实验过程：&#34;&gt;&lt;a href=&#34;#实验过程：&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h3&gt;&lt;p&gt;首先将PC1和PC2指定的ip分别配置，留意一下网关的地址哦！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-27%20153610.png&#34; alt=&#34;屏幕截图 2024-02-27 153610&#34;&gt;&lt;/p&gt;
&lt;p&gt;然后开始配置两个路由器&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-27%20164627.png&#34; alt=&#34;屏幕截图 2024-02-27 164627&#34;&gt;&lt;/p&gt;
&lt;p&gt;AR1配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/0]ip address 192.168.10.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/1]ip address 192.168.20.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]ip route-static 192.168.30.0 24 192.168.20.2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;AR2配置如下：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Huawei]sysname AR 2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/1]ip address 192.168.20.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/0]ip address 192.168.30.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 2]ip route-static 192.168.10.0 24 192.168.20.1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;尝试测试两台主机是否可以互相ping通&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-27%20170102.png&#34; alt=&#34;屏幕截图 2024-02-27 170102&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;静态路由-实验二&#34;&gt;&lt;a href=&#34;#静态路由-实验二&#34; class=&#34;headerlink&#34; title=&#34;静态路由-实验二&#34;&gt;&lt;/a&gt;静态路由-实验二&lt;/h2&gt;&lt;h3 id=&#34;实验拓扑图：-1&#34;&gt;&lt;a href=&#34;#实验拓扑图：-1&#34; class=&#34;headerlink&#34; title=&#34;实验拓扑图：&#34;&gt;&lt;/a&gt;实验拓扑图：&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-27%20172358.png&#34; alt=&#34;屏幕截图 2024-02-27 172358&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;实验过程：-1&#34;&gt;&lt;a href=&#34;#实验过程：-1&#34; class=&#34;headerlink&#34; title=&#34;实验过程：&#34;&gt;&lt;/a&gt;实验过程：&lt;/h3&gt;&lt;p&gt;先将pc机的ip等进行配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;PC1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ip地址：192.168.10.100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;子网掩码：255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;网关：192.168.10.254  //注意网关就是AR1的g0/0/0端口的IP地址&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;PC2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ip地址：192.168.30.100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;子网掩码：255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;网关：192.168.30.254&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;PC3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ip地址：8.8.4.100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;子网掩码：255.255.255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;网关：8.8.4.254&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;将各个路由的端口配置ip&lt;/p&gt;
&lt;p&gt;AR1的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/0]ip address 192.168.10.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/1]ip address 192.168.20.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;AR2的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/0]ip address 192.168.20.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Huawei-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/1]ip address 10.10.10.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/2]ip address 8.8.4.254 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;AR3的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/1]ip address 192.168.30.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/0]ip address 10.10.10.2 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;继续进行route-static配置&lt;/p&gt;
&lt;p&gt;AR1的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]ip route-static 10.10.10.0 24 192.168.20.2 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]ip route-static 8.8.4.1 24 192.168.20.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]ip route-static 192.168.30.0 24 192.168.20.2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;AR2的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]ip route-static 192.168.30.0 24 10.10.10.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]ip route-static 192.168.10.0 24 192.168.20.1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;AR3的配置&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]ip route-static 192.168.20.0 24 10.10.10.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]ip route-static 8.8.4.1 24 10.10.10.1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]ip route-static 192.168.10.0 24 10.10.10.1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;注意交换机不用管的，然后尝试ping命令发现可以成功&lt;/p&gt;
&lt;p&gt;这里稍微提一下ip route-static的，&lt;code&gt;ip route-static 网络地址 子网掩码 下一跳&lt;/code&gt;&lt;/p&gt;
</content>
        <category term="原创" />
        <category term="网基" />
        <category term="eNSP" />
        <updated>2024-02-27T07:18:09.233Z</updated>
    </entry>
    <entry>
        <id>https://w-sqrt7.github.io/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E5%8F%82%E8%80%83%E5%91%BD%E4%BB%A4/</id>
        <title>网基实践题-参考命令</title>
        <link rel="alternate" href="https://w-sqrt7.github.io/2024/02/27/eNSP/%E7%BD%91%E5%9F%BA%E5%AE%9E%E8%B7%B5%E9%A2%98-%E5%8F%82%E8%80%83%E5%91%BD%E4%BB%A4/"/>
        <content type="html">&lt;h1 id=&#34;网基实践题-参考命令&#34;&gt;&lt;a href=&#34;#网基实践题-参考命令&#34; class=&#34;headerlink&#34; title=&#34;网基实践题-参考命令&#34;&gt;&lt;/a&gt;网基实践题-参考命令&lt;/h1&gt;&lt;h2 id=&#34;ENSP关闭模拟终端提示&#34;&gt;&lt;a href=&#34;#ENSP关闭模拟终端提示&#34; class=&#34;headerlink&#34; title=&#34;ENSP关闭模拟终端提示&#34;&gt;&lt;/a&gt;ENSP关闭模拟终端提示&lt;/h2&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;undo terminal monitor	#关闭模拟终端提示&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;undo info-center enable	#关闭终端的告警或日志显示&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;undo info enable	#关闭信息提示&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;配置Access接口，并加入对应的VLAN&#34;&gt;&lt;a href=&#34;#配置Access接口，并加入对应的VLAN&#34; class=&#34;headerlink&#34; title=&#34;配置Access接口，并加入对应的VLAN&#34;&gt;&lt;/a&gt;配置Access接口，并加入对应的VLAN&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW1]interface GigabitEthernet 0/0/1	//进入g0/0/1接口&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-GigabitEthernet0/0/1]port link-type access	//设置连接方式为access&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-GigabitEthernet0/0/1]port default vlan 10	//设置默认vlan10 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-GigabitEthernet0/0/1]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;配置Trunk接口，并创建对应的允许通过列表&#34;&gt;&lt;a href=&#34;#配置Trunk接口，并创建对应的允许通过列表&#34; class=&#34;headerlink&#34; title=&#34;配置Trunk接口，并创建对应的允许通过列表&#34;&gt;&lt;/a&gt;配置Trunk接口，并创建对应的允许通过列表&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[SW1]interface GigabitEthernet 0/0/3	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-GigabitEthernet0/0/3]port link-type trunk	//设置连接方式为trunk，常用于和上层连接的端口&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-GigabitEthernet0/0/3]port trunk allow-pass vlan 10 20	//设置允许vlan10和vlan20的数据通过，可设值vlan all&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[SW1-GigabitEthernet0/0/3]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;配置接口IP&#34;&gt;&lt;a href=&#34;#配置接口IP&#34; class=&#34;headerlink&#34; title=&#34;配置接口IP&#34;&gt;&lt;/a&gt;配置接口IP&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]interface GigabitEthernet 0/0/1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/1]ip address 192.168.50.1 24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;配置子接口IP，动态dot1q封装&#34;&gt;&lt;a href=&#34;#配置子接口IP，动态dot1q封装&#34; class=&#34;headerlink&#34; title=&#34;配置子接口IP，动态dot1q封装&#34;&gt;&lt;/a&gt;配置子接口IP，动态dot1q封装&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]interface GigabitEthernet 0/0/0.1	//进入g0/0/0.1子接口&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.1]ip address 192.168.10.1 24	//配置子接口IP地址&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.1]dot1q termination vid 10	//给子接口封装dot1q协议，允许vlan10 通过&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.1]arp broadcast enable	//启动arp广播功能功能&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.1]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int g0/0/0.2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.2]dot1q termination vid 20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.2]ip address 192.168.20.1 24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.2]arp broadcast enable&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-GigabitEthernet 0/0/0.2]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;创建vlan-配置vlanip&#34;&gt;&lt;a href=&#34;#创建vlan-配置vlanip&#34; class=&#34;headerlink&#34; title=&#34;创建vlan,配置vlanip&#34;&gt;&lt;/a&gt;创建vlan,配置vlanip&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]vlan batch 100 200	//创vlan 100 和vlan 200&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]vlan batch 100 to 200&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]vlan 100&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]int Vlanif 1 //配置vlan的ip地址&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei-Vlanif 1]ip address 172.16.50.1 24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;配置DHCP&#34;&gt;&lt;a href=&#34;#配置DHCP&#34; class=&#34;headerlink&#34; title=&#34;配置DHCP&#34;&gt;&lt;/a&gt;配置DHCP&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;Huawei&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[Huawei]sysname AR3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3]dhcp enable	//启用DHCP功能&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3]ip pool testpool	//设置地址池，testpool为自定的地址池名称&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]gateway-list 192.168.10.1	//配置网关&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]network 192.168.10.0 mask 255.255.255.0	//配置网段&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]excluded-ip-address 192.168.10.2 192.168.10.100	//禁用某个段的IP&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]excluded-ip-address 192.168.10.201 192.168.10.254&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]dns-list 114.114.114.114	//配置dns&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]lease day 2 hour 5 minute 30	//配置逾期时间&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-ip-pool-testpool]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3]int g0/0/0		//配置连接的接口&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-GigabitEthernet0/0/0]ip address 192.168.10.1 24 //给端口设置ip地址，即网关地址&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-GigabitEthernet0/0/0]dhcp select global	//选择全局模式&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR3-GigabitEthernet0/0/0]quit&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&#34;配置telnet远程登录&#34;&gt;&lt;a href=&#34;#配置telnet远程登录&#34; class=&#34;headerlink&#34; title=&#34;配置telnet远程登录&#34;&gt;&lt;/a&gt;配置telnet远程登录&lt;/h3&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;AR 1&amp;gt;sys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]telnet server enable		//启用Telnet服务器&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]user-interface vty 0 4	//选择虚拟终端接口范围，从0到4。VTY（Virtual Teletype）接口通常用于远程登录，如Telnet或SSH。0到4即最多同时5个虚拟终端会话&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ui-vty0-4]authentication-mode  aaa		//设置认证模式为AAA（Authentication, Authorization, and Accounting）。这意味着远程用户登录时，将使用AAA框架进行身份验证、授权和计费。即需要用户名和密码，设为password时，只需要密码&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ui-vty0-4](user privilege level 3)		//设置用户权限级别为3,可进入aaa配置单个用户的权限&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-ui-vty0-4]quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1]aaa		//进入AAA配置模式。从这里开始，您可以配置与AAA相关的各种参数，如用户、角色、权限等。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-aaa]local-user service-type telnet	//用于指定本地用户的接入类型为 Telnet&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[AR 1-aaa]local-user sqrt password cipher abcd (privilege level 3)		//在AAA模式下，创建一个本地用户名为“sqrt”，并为其设置加密密码“abcd”。cipher 指的是密码是以加密方式存储的，可使用simple，即明文方式&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;





&lt;h2 id=&#34;常用命令总结（转载）&#34;&gt;&lt;a href=&#34;#常用命令总结（转载）&#34; class=&#34;headerlink&#34; title=&#34;常用命令总结（转载）&#34;&gt;&lt;/a&gt;常用命令总结（转载）&lt;/h2&gt;&lt;p&gt;原文链接：&lt;a href=&#34;https://blog.csdn.net/qq_43085848/article/details/121679021&#34;&gt;https://blog.csdn.net/qq_43085848/article/details/121679021&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&#34;一、华为设备命令视图&#34;&gt;&lt;a href=&#34;#一、华为设备命令视图&#34; class=&#34;headerlink&#34; title=&#34;一、华为设备命令视图&#34;&gt;&lt;/a&gt;一、华为设备命令视图&lt;/h4&gt;&lt;p&gt;以下是华为设备的常用命令视图：&lt;br&gt;用户视图：&amp;lt; Huawei&amp;gt;&lt;br&gt;系统视图：&amp;lt; Huawei&amp;gt;system-view&amp;#x2F;sys [Huawei]&lt;br&gt;接口视图：&lt;br&gt;&amp;lt; Huawei&amp;gt;system-view&amp;#x2F;sys&lt;br&gt;[Huawei]interface&amp;#x2F;int Ethernet0&amp;#x2F;0&amp;#x2F;1&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;1]&lt;br&gt;路由协议视图：[Huawei]isis&lt;br&gt;[Huawei- isis-1]&lt;/p&gt;
&lt;h4 id=&#34;二、设置设备名称&#34;&gt;&lt;a href=&#34;#二、设置设备名称&#34; class=&#34;headerlink&#34; title=&#34;二、设置设备名称&#34;&gt;&lt;/a&gt;二、设置设备名称&lt;/h4&gt;&lt;p&gt;sysname&amp;#x2F;sy命令设置设备的名称&lt;br&gt;&amp;lt; Huawei&amp;gt; system-view&lt;br&gt;[Huawei] sysname Switch 更改设备名称&lt;br&gt;[Switch]&lt;/p&gt;
&lt;h4 id=&#34;三、常用基本命令&#34;&gt;&lt;a href=&#34;#三、常用基本命令&#34; class=&#34;headerlink&#34; title=&#34;三、常用基本命令&#34;&gt;&lt;/a&gt;三、常用基本命令&lt;/h4&gt;&lt;p&gt;1、quit 命令 返回上一级视图&lt;br&gt;2、return 命令 直接返回&amp;lt; Huawei&amp;gt;用户视图&lt;br&gt;3、save 命令 在&amp;lt; Huawei&amp;gt;用户视图使用，保存配置&lt;br&gt;4、reboot 命令 重启设备&lt;br&gt;5、shutdown 命令 关闭端口&lt;br&gt;undo shutdown 命令 激活端口&lt;br&gt;6、undo 命令，有以下：&lt;br&gt;（1）用于恢复缺省情况（例如设置设备的名称）&lt;br&gt;&amp;lt; Huawei&amp;gt; system-view&lt;br&gt;[Huawei] sysname Switch&lt;br&gt;[Switch] undo sysname 恢复缺省情况&lt;br&gt;[Huawei]&lt;br&gt;（2）用于禁用某个功能（例如ftp）&lt;br&gt;&amp;lt; Huawei&amp;gt; system-view&lt;br&gt;[Huawei] ftp server enable&lt;br&gt;[Huawei] undo ftp server 禁用设备的ftp功能&lt;br&gt;（3）用于删除某项设置&lt;br&gt;undo后跟某项命令的设置信息即可删除相关的某项配置&lt;/p&gt;
&lt;h4 id=&#34;四、关闭泛洪信息&#34;&gt;&lt;a href=&#34;#四、关闭泛洪信息&#34; class=&#34;headerlink&#34; title=&#34;四、关闭泛洪信息&#34;&gt;&lt;/a&gt;四、关闭泛洪信息&lt;/h4&gt;&lt;p&gt;&amp;lt; Huawei&amp;gt;undo ter mon 关闭终端显示信息中心发送信息&lt;/p&gt;
&lt;h4 id=&#34;五、设置设备接口的ip地址和子网掩码&#34;&gt;&lt;a href=&#34;#五、设置设备接口的ip地址和子网掩码&#34; class=&#34;headerlink&#34; title=&#34;五、设置设备接口的ip地址和子网掩码&#34;&gt;&lt;/a&gt;五、设置设备接口的ip地址和子网掩码&lt;/h4&gt;&lt;p&gt;[Huawei] interface 接口 进入接口视图&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;1]ip address ip地址 子网掩码 配置ip地址和子网掩码&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;1]undo shutdown 启动接口&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;1]display interface 接口 查看接口状态&lt;/p&gt;
&lt;h4 id=&#34;六、交换机的登陆&#34;&gt;&lt;a href=&#34;#六、交换机的登陆&#34; class=&#34;headerlink&#34; title=&#34;六、交换机的登陆&#34;&gt;&lt;/a&gt;六、交换机的登陆&lt;/h4&gt;&lt;p&gt;(一)设置Console接口密码&lt;br&gt;[Huawei]user-interface console 0 进入控制台接口&lt;br&gt;[Huawei-ui-console0]authentication-mode password 设置认证方式为密码认证&lt;br&gt;[Huawei-ui-console0]set authentication password cipher&amp;#x2F;simple 密码&lt;br&gt;配置密文&amp;#x2F;明文密码&lt;br&gt;[Huawei-ui-console0]user privilege level 级别 配置用户级别，级别可为0-15&lt;/p&gt;
&lt;p&gt;(二)设置Telnet接口密码&lt;br&gt;[Huawei]user-interface vty 0 4 进入VTY接口，最多允许5个用户同时登陆&lt;br&gt;[Huawei-ui-vty0-4]authentication-mode aaa 认证方式为aaa模式&lt;br&gt;[Huawei]aaa 进入aaa配置&lt;br&gt;[Huawei-aaa]local-user 用户名 password cipher&amp;#x2F;simple 密码&lt;br&gt;设置用户的密码&lt;br&gt;[Huawei-aaa]local-user 用户名 service-type telnet&lt;br&gt;设置用户的服务类型协议为telnet，也可以为其它协议，比如http即使用Web界面&lt;br&gt;[Huawei-aaa]local-user 用户名 privilege level 级别 配置用户级别&lt;/p&gt;
&lt;h4 id=&#34;七、VLAN配置&#34;&gt;&lt;a href=&#34;#七、VLAN配置&#34; class=&#34;headerlink&#34; title=&#34;七、VLAN配置&#34;&gt;&lt;/a&gt;七、VLAN配置&lt;/h4&gt;&lt;p&gt;(一)单独和批次创建VLAN&lt;br&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]vlan 10 创建或进入VLAN10&lt;br&gt;[Huawei]vlan batch 10 to 20 创建VLAN10到VLAN20，共创建11个VLAN&lt;br&gt;batch to表示创建连续的VLAN，若省略to则创建或进入指定号码的VLAN&lt;/p&gt;
&lt;p&gt;(二)进入VLAN视图&lt;br&gt;[Huawei]vlan 10 若已创建vlan，则进入该VLAN视图；若没有则创建VLAN10&lt;br&gt;[Huawei-vlan10]name huawei 配置vlan10的名称为huawei&lt;br&gt;[Huawei]vlan vlan-name huawei 通过更改的VLAN名称进入VLAN视图&lt;/p&gt;
&lt;p&gt;(三)将端口指定到VLAN&lt;br&gt;1、单一端口指定VLAN&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port link-type access&lt;br&gt;配置接口类型为access&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port default vlan ID号&lt;br&gt;配置端口的缺省的VLAN并将接口加入到指定vlan&lt;/p&gt;
&lt;p&gt;2、多个端口指定VLAN&lt;br&gt;[Huawei]vlan 10 进入相关VLAN的视图，这里表示进入vlan10&lt;br&gt;[Huawei-vlan10]port GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1 to 0&amp;#x2F;0&amp;#x2F;10 将多个端口一并设置为相关VLAN，这里是将1~10号接口全部设置为VLAN10&lt;/p&gt;
&lt;p&gt;(四)查看配置情况&lt;br&gt;[Huawei]dislay vlan ID号&lt;/p&gt;
&lt;p&gt;[Huawei]display current-configuration 显示当前配置&lt;/p&gt;
&lt;h4 id=&#34;八、交换机端口工作模式&#34;&gt;&lt;a href=&#34;#八、交换机端口工作模式&#34; class=&#34;headerlink&#34; title=&#34;八、交换机端口工作模式&#34;&gt;&lt;/a&gt;八、交换机端口工作模式&lt;/h4&gt;&lt;p&gt;(一)Access模式(接入模式)&lt;br&gt;Access端口只属于单个VLAN，一般用于连接计算机的端口，即只运行设置一个VLAN，丢弃其它VLAN。&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1 进入接口视图&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port link-type access 设&lt;br&gt;置端口工作模式为access&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port default vlan ID号 配置端口的缺省的VLAN并将接口加入到指定vlan&lt;/p&gt;
&lt;p&gt;(二)Trunk模式&lt;br&gt;Trunk端口允许多个VLAN通过，可以接收和发送多个VLAN报文，一般用于交换机之间端口，只允许默认VLAN报文发送时不打标签，带有标签的数据被转发至另一个交换机Trunk端口。&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port link-type trunk 设置端口工作模式为trunk&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port trunk pvid vlan ID号 指定端口的PVID值&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port trunk allow-pass vlan all&amp;#x2F;ID号&lt;br&gt;允许所有或部分VLAN通过trunk口&lt;/p&gt;
&lt;p&gt;(三)Hybrid模式&lt;br&gt;Hybrid端口和Trunk端口一样，不过它既能用于交换机也能用于计算机，允许多个VLAN报文发送时不打标签。&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port link-type hybrid 设置端口工作模式为hybrid&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port hybrid pvid vlan ID号 指定端口的PVID值&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port hybrid tagged vlan ID号&lt;br&gt;指定相关VLAN的数据发送时添加Tag&lt;br&gt;[Huawei-GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1]port hybrid tagged(untagged) vlan all&amp;#x2F;ID号&lt;br&gt;允许hybrid端口对所有或部分VLAN添加(不添加）Tag&lt;/p&gt;
&lt;h4 id=&#34;九、QinQ技术&#34;&gt;&lt;a href=&#34;#九、QinQ技术&#34; class=&#34;headerlink&#34; title=&#34;九、QinQ技术&#34;&gt;&lt;/a&gt;九、QinQ技术&lt;/h4&gt;&lt;p&gt;QinQ技术用于解决公网VLAN ID的资源紧缺问题，在IEEE 802.1Q协议标签前再次封装IEEE802.1Q协议标签，其中一层标识用户系统网络，另一层标识网络业务。&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]port link-type dot1q-tunnel 设置交换机端口类型为QinQ端口&lt;/p&gt;
&lt;h4 id=&#34;十、VCMP（VLAN集中管理协议）&#34;&gt;&lt;a href=&#34;#十、VCMP（VLAN集中管理协议）&#34; class=&#34;headerlink&#34; title=&#34;十、VCMP（VLAN集中管理协议）&#34;&gt;&lt;/a&gt;十、VCMP（VLAN集中管理协议）&lt;/h4&gt;&lt;p&gt;VLAN集中管理协议可实现在一台交换机上创建、删除VLAN，提供一种在二层网络中传播VLAN配置信息（域内所有指定的其他交换机自动同步创建、删除相应的VLAN），简单的来说，只需在一台交换机上进行创建、删除VLAN的操作，这些操作会同步至指定的所以交换机，从而大大地减少了工作量，并保证了各修改的一致性。&lt;/p&gt;
&lt;p&gt;1、配置交换机接口的链路类型&lt;br&gt;在VCMP管理域中，通过Trunk或Hybrid链路接口连接的同组域名相同的交换机，所以执行命令port link-type { trunk | hybrid }指定接口的链路类型为Trunk或Hybrid，即在进入相应接口后，输入命令port link-type类型，指定配置接口类型。&lt;br&gt;2、配置VCMP角色&lt;/p&gt;
&lt;p&gt;配置角色为服务器角色，缺省时，VCMP管理域中的角色是client。&lt;br&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]vcmp role server&amp;#x2F;client&amp;#x2F;silent&amp;#x2F;transparent&lt;br&gt;3、配置管理域的域名和管理域认证密码&lt;/p&gt;
&lt;p&gt;在同一VCMP管理域内的每台交换机的域名必须是相同的；管理域认证密码这一步是可选的，即也可以不配置认证密码，缺省情况下，没有配置认证密码，VCMP报文直接认证通过。要注意若设置了认证密码，则Server与所有Client上的密码是要保持一致的，执行命令vcmp authentication sha2-256 password 认证密码，配置VCMP管理域的认证密码。&lt;br&gt;[Huawei]vcmp 设备ID号 设备名称 配置相应域名&lt;br&gt;[Huawei]vcmp authentication 设备名称 password 密码&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1 进入需要使能VCMP功能的以太网接口视图，在二层以太网接口上使能，比如这里就是进入GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1接口&lt;br&gt;4、使能VCMP功能的接口&lt;/p&gt;
&lt;p&gt;通过interface命令后跟接口名称，进入需要使能VCMP功能的接口视图，使二层以太网处于使能状态，通过执行undo vcmp disable使基于接口使能VCMP功能，缺省情况下，交换机上的所有接口的VCMP功能处于使能状态。&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]undo vcmp disable 基于该接口使能VCMP功能，缺省情况时则交换机上所有接口的VCMP功能处于使能状态&lt;/p&gt;
&lt;h4 id=&#34;十一、GVRP-VLAN注册协议&#34;&gt;&lt;a href=&#34;#十一、GVRP-VLAN注册协议&#34; class=&#34;headerlink&#34; title=&#34;十一、GVRP(VLAN注册协议)&#34;&gt;&lt;/a&gt;十一、GVRP(VLAN注册协议)&lt;/h4&gt;&lt;p&gt;GVRP协议用于注册和注销VLAN属性，手工配置的VLAN称为静态VLAN，而通过GVRP协议创建的VLAN称为动态VLAN。&lt;/p&gt;
&lt;p&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]vcmp role silent 配置GVRP之前必须要将VCMP角色设置为Silent或Transparent&lt;br&gt;[Huawei]gvrp 全局使能GVRP功能&lt;br&gt;[Huawei]interface GigabitEthernet 0&amp;#x2F;0&amp;#x2F;1 进入相关接口&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]port link-type trunk 配置接口为trunk类型&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]port trunk allow-pass vlan all 允许所有的VLAN通过该接口&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]gvrp 在接口下执行命令使能接口GVRP功能&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]gvrp registration normal 设置GVRP接口注册模式为normal，简化配置&lt;/p&gt;
&lt;p&gt;[Huawei]display gvrp statistics 在交换机上查看接口的GVRP统计信息&lt;/p&gt;
&lt;h4 id=&#34;十二、STP（生成树协议）&#34;&gt;&lt;a href=&#34;#十二、STP（生成树协议）&#34; class=&#34;headerlink&#34; title=&#34;十二、STP（生成树协议）&#34;&gt;&lt;/a&gt;十二、STP（生成树协议）&lt;/h4&gt;&lt;p&gt;生成树协议是一种链路管理协议，为网络提供路径冗余，同时防止产生环路。&lt;/p&gt;
&lt;p&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]stp enable 启动生成树协议&lt;br&gt;[Huawei]stp root primary 配置本桥为根桥&lt;/p&gt;
&lt;p&gt;[Huawei]display stp brief 在交换机上查看端口状态和端口的保护类型&lt;/p&gt;
&lt;h4 id=&#34;十三、VRRP-虚拟路由冗余协议&#34;&gt;&lt;a href=&#34;#十三、VRRP-虚拟路由冗余协议&#34; class=&#34;headerlink&#34; title=&#34;十三、VRRP(虚拟路由冗余协议)&#34;&gt;&lt;/a&gt;十三、VRRP(虚拟路由冗余协议)&lt;/h4&gt;&lt;p&gt;虚拟路由冗余协议用于解决局域网中配置静态网关出现单点失效现象的路由协议，可以配置一个交换机群集，通过该协议能实现主设备和备用设备共同分担用户业务的配置。&lt;/p&gt;
&lt;p&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]interface Ethernet0&amp;#x2F;0&amp;#x2F;1&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;1]ip addres ip地址 子网掩码&lt;/p&gt;
&lt;p&gt;[Huawei]interface Ethernet0&amp;#x2F;0&amp;#x2F;2&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;2]ip addres ip地址 子网掩码 配置连接主机的接口IP地址&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;2]vrrp vrid 1 virtual-ip ip地址 配置备份组1的虚拟网关地址&lt;br&gt;[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;2]vrrp vrid 1 priority 优先级 配置路由器在备份组1中的优先级[Huawei- Ethernet0&amp;#x2F;0&amp;#x2F;2]vrrp vrid 2 virtual-ip ip地址 配置备份组2的虚拟网关地址&lt;/p&gt;
&lt;p&gt;[Huawei]display vrrp 查看路由器的VRRP状态&lt;/p&gt;
&lt;h4 id=&#34;十四、BFD（双向转发检测）&#34;&gt;&lt;a href=&#34;#十四、BFD（双向转发检测）&#34; class=&#34;headerlink&#34; title=&#34;十四、BFD（双向转发检测）&#34;&gt;&lt;/a&gt;十四、BFD（双向转发检测）&lt;/h4&gt;&lt;p&gt;BFD是一种快速检测、监控网络中链路或IP路由的转发连通状况的全网统一的检测机制。&lt;/p&gt;
&lt;p&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]bfd 使能全局BFD功能并进入BFD视图&lt;br&gt;*[Huawei]default-ip-address 组播ip地址 配置BFD缺省组播IP地址，缺省情况下，使用组播地址224.0.0.184&lt;/p&gt;
&lt;p&gt;[Huawei]bfd 会话设备名称 bind peer-ip ip地址 interface端口类型 端口号 若有IP地址的三层接口时，创建BFD会话的绑定信息&lt;br&gt;&amp;#x2F;&lt;br&gt;[Huawei]bfd 会话设备名称 bind peer-ip default-ip interface 端口类型 端口号 若为二或无IP的三层接口时，创建组播BFD&lt;br&gt;[Huawei]discriminator local 标识符值 配置BFD会话的本地标识符&lt;br&gt;[Huawei]discriminator remote 标识符值 配置BFD会话的远端标识符&lt;br&gt;[Huawei]commit 提交配置&lt;/p&gt;
&lt;h4 id=&#34;十五、显示路由器的路由&#34;&gt;&lt;a href=&#34;#十五、显示路由器的路由&#34; class=&#34;headerlink&#34; title=&#34;十五、显示路由器的路由&#34;&gt;&lt;/a&gt;十五、显示路由器的路由&lt;/h4&gt;&lt;p&gt;&amp;lt; Huawei&amp;gt;display ip routing-table 显示路由器的路由&lt;br&gt;&amp;lt; Huawei&amp;gt;display ip routing-table verbos 显示路由表的详细信息&lt;br&gt;&amp;lt; Huawei&amp;gt;display ip routing-table acl 编号值 显示通过ACL编号为某值过滤的激活路由的概要信息&lt;br&gt;&amp;lt; Huawei&amp;gt;display ip routing-table 目标网络的网络地址 子网掩码 网关 根据下一跳显示某目的地址的路由&lt;/p&gt;
&lt;h4 id=&#34;十六、静态路由、默认路由的配置&#34;&gt;&lt;a href=&#34;#十六、静态路由、默认路由的配置&#34; class=&#34;headerlink&#34; title=&#34;十六、静态路由、默认路由的配置&#34;&gt;&lt;/a&gt;十六、静态路由、默认路由的配置&lt;/h4&gt;&lt;p&gt;静态路由指定某一网络访问所需要经过的路径，而默认路由是一种特殊的静态路由，当路由表中与包的目的地址之间没有匹配的表项时，路由器做出选择。&lt;/p&gt;
&lt;p&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]ip routing-static 0.0.0.0 0.0.0.0 默认网关地址 配置默认路由，从而简化配置，提高网络性能&lt;/p&gt;
&lt;p&gt;[Huawei]ip routing-static 目标网络的网络地址 子网掩码 网关 配置静态路由，其中网关处的IP地址说明了路由下一站&lt;/p&gt;
&lt;h4 id=&#34;十七、向当前路由表中添加一条新的路由表条目&#34;&gt;&lt;a href=&#34;#十七、向当前路由表中添加一条新的路由表条目&#34; class=&#34;headerlink&#34; title=&#34;十七、向当前路由表中添加一条新的路由表条目&#34;&gt;&lt;/a&gt;十七、向当前路由表中添加一条新的路由表条目&lt;/h4&gt;&lt;p&gt;[Huawei]route add 210.43.230.33 mask 255.255.255.224 202.103.123.7 metric 5&lt;br&gt;&amp;#x2F;&amp;#x2F;设定一个到目的网络210.43.230.33的路由，中间经过5个路由器网段，首先经过本地网络上的一个路由器IP为202.103.123.7，子网掩码为255.255.255.224&lt;/p&gt;
&lt;h4 id=&#34;十八、DHCP（动态主机配置协议）&#34;&gt;&lt;a href=&#34;#十八、DHCP（动态主机配置协议）&#34; class=&#34;headerlink&#34; title=&#34;十八、DHCP（动态主机配置协议）&#34;&gt;&lt;/a&gt;十八、DHCP（动态主机配置协议）&lt;/h4&gt;&lt;p&gt;动态主机配置协议是基于BOOTP上的改进所来的主机配置协议，通过该协议，DHCP服务器为DHCP客户端进行动态IP地址分配，即不必指明DHCP服务器的IP地址就能获得DHCP服务。&lt;/p&gt;
&lt;p&gt;&amp;lt; Huawei&amp;gt;system-view&lt;br&gt;[Huawei]dhcp option template template1 设置分配的分配的启动配置文件&lt;br&gt;[Huawei-dhcp-option-template-template1]gateway-list 网关地址 配置网关地址&lt;br&gt;[Huawei-dhcp-option-template-template1]bootfile configuration.ini 获取配置文件&lt;br&gt;[Huawei-dhcp-option-template-template1]next-server 配置文件地址 配置获取配置文件地址&lt;/p&gt;
&lt;p&gt;(一)接口模式的DHCP命令&lt;br&gt;[Huawei]dhcp enable 开启DHCP配置功能&lt;br&gt;[Huawei]int g0&amp;#x2F;0&amp;#x2F;1 进入相关接口进行接口模式的DHCP配置&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]ip address ip地址 子网掩码&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]dhcp select interface 开启接口的DHCP功能&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]dhcp server excluded-ip-address 单个要排除的ip地址或两个ip地址即范围&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]dhcp server lease day 天 hour 时 minute 分 设置地址池ip租用有效期&lt;br&gt;&amp;#x2F;*[Huawei- GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]lease unlimited 租期无限制&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]dhcp server dns-list 主要DNS 备用DNS 设置DNS&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]dhcp select interface 开启接口的DHCP功能使其从接口地址池分配地址&lt;/p&gt;
&lt;p&gt;(二)全局模式的DHCP命令&lt;br&gt;[Huawei]dhcp enable&lt;br&gt;[Huawei]ip pool HUAWEI 创建全局地址池，pool后跟名称，这里是HUAWEI&lt;br&gt;[Huawei-ip-pool-HUAWEI]network ip地址 mask 子网掩码 设置全局地址池的范围&lt;br&gt;[Huawei-ip-pool-HUAWEI]getway-list 网关地址 设置分配的网关地址&lt;br&gt;[Huawei-ip-pool-HUAWEI]excluded-ip-address ip地址 ip地址 设置不参与动态分配的地址，可以是一个范围&lt;br&gt;[Huawei-ip-pool-HUAWEI]dhcp server dns-list 主要DNS 备用DNS 设置DNS&lt;br&gt;[Huawei-ip-pool-HUAWEI]lease day 天 hour 时 minute 分 设置地址池ip租用有效期&lt;br&gt;&amp;#x2F;*[Huawei-ip-pool-HUAWEI]lease unlimited 租期无限制&lt;br&gt;[Huawei-ip-pool-HUAWEI]static-bind ip-address ip地址 mac-address MAC地址 option- template template1 对某个MAC地址进行绑定，给该MAC地址分配固定的IP地址&lt;br&gt;[Huawei]int g0&amp;#x2F;0&amp;#x2F;1 进入相关接口&lt;br&gt;[Huawei-GigabitEthernet0&amp;#x2F;0&amp;#x2F;1]dhcp select global 指定该接口采用全局地址池为客户端分配ip地址&lt;br&gt;&amp;lt; Huawei&amp;gt;dis ip pool name 全局地址池名称 all 查看全局地址池的分配信息&lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&#34;https://blog.csdn.net/qq_43085848/article/details/121679021&#34;&gt;https://blog.csdn.net/qq_43085848/article/details/121679021&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="网基" />
        <category term="eNSP" />
        <category term="转载" />
        <updated>2024-02-27T07:18:09.227Z</updated>
    </entry>
</feed>
